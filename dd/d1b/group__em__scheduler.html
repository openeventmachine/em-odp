<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EM-ODP: Scheduler</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doc-stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EM-ODP
   &#160;<span id="projectnumber">3.8.0-1</span>
   </div>
   <div id="projectbrief">Event Machine on ODP</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dd/d1b/group__em__scheduler.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Scheduler</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf80e7173968f134ff3a9df6509c17009"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d1b/group__em__scheduler.html#gaf80e7173968f134ff3a9df6509c17009">em_atomic_processing_end</a> (void)</td></tr>
<tr class="separator:gaf80e7173968f134ff3a9df6509c17009"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga22b178939f69c5d7115e7438f1db0019"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d1b/group__em__scheduler.html#ga22b178939f69c5d7115e7438f1db0019">em_ordered_processing_end</a> (void)</td></tr>
<tr class="separator:ga22b178939f69c5d7115e7438f1db0019"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga497e67a34d3651a5cfffcb8fd1fb98bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d1b/group__em__scheduler.html#ga497e67a34d3651a5cfffcb8fd1fb98bd">em_preschedule</a> (void)</td></tr>
<tr class="separator:ga497e67a34d3651a5cfffcb8fd1fb98bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga35b0afc1114a49aa78ea56a2b64bb024"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d11/event__machine__types_8h.html#af9dd68e59307d0e82e124d85ebd555b9">em_sched_context_type_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d1b/group__em__scheduler.html#ga35b0afc1114a49aa78ea56a2b64bb024">em_sched_context_type_current</a> (em_queue_t *queue)</td></tr>
<tr class="separator:ga35b0afc1114a49aa78ea56a2b64bb024"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Event Machine event scheduling related services</p>
<p>Most of the event scheduling is a system dependent implementation but the common services here can be used for performance tuning etc.</p>
<p>Do not include this from the application, <a class="el" href="../../d7/d5e/event__machine_8h.html">event_machine.h</a> will do it for you. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaf80e7173968f134ff3a9df6509c17009"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf80e7173968f134ff3a9df6509c17009">&#9670;&nbsp;</a></span>em_atomic_processing_end()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void em_atomic_processing_end </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A hint to release an atomic processing context.</p>
<p>This function can be used to release the atomic context before returning from the EO receive function.</p>
<p>After this API call is the scheduler allowed to schedule another event from the same atomic queue (or atomic group) that established the current atomic context, to another (or same) core.</p>
<p>When an event has been received from an atomic queue, the scheduler is allowed to schedule another event from the same atomic queue to another, or same, core after this API call. This increases parallelism and may improve performance - however, the exclusive processing and ordering might be lost. Note, however, that this is a hint only, the scheduler is still allowed to keep the atomic context until scheduling the next event.</p>
<p>Can only be called from within the EO receive function.</p>
<p>The call is ignored if the currently active scheduling context type is not atomic (EM_SCHED_CONTEXT_TYPE_ATOMIC, see <a class="el" href="../../dd/d1b/group__em__scheduler.html#ga35b0afc1114a49aa78ea56a2b64bb024">em_sched_context_type_current()</a>).</p>
<p>Pseudo-code example: </p><div class="fragment"><div class="line">receive_func(<span class="keywordtype">void</span>* eo_ctx, em_event_t event, <a class="code" href="../../d4/d11/event__machine__types_8h.html#a49fd700da185b0f64834bf967479a992">em_event_type_t</a> type,</div>
<div class="line">             em_queue_t queue, <span class="keywordtype">void</span>* q_ctx)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>(is_my_atomic_queue(q_ctx))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// this needs to be done atomically:</span></div>
<div class="line">        update_sequence_number(event);</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="../../dd/d1b/group__em__scheduler.html#gaf80e7173968f134ff3a9df6509c17009">em_atomic_processing_end</a>();</div>
<div class="line">        <span class="comment">// do other processing (potentially) in parallel:</span></div>
<div class="line">        do_long_parallel_work();</div>
<div class="line">    }</div>
<div class="line"> }</div>
<div class="ttc" id="aevent__machine__types_8h_html_a49fd700da185b0f64834bf967479a992"><div class="ttname"><a href="../../d4/d11/event__machine__types_8h.html#a49fd700da185b0f64834bf967479a992">em_event_type_t</a></div><div class="ttdeci">uint32_t em_event_type_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d11/event__machine__types_8h_source.html#l00085">event_machine_types.h:85</a></div></div>
<div class="ttc" id="agroup__em__scheduler_html_gaf80e7173968f134ff3a9df6509c17009"><div class="ttname"><a href="../../dd/d1b/group__em__scheduler.html#gaf80e7173968f134ff3a9df6509c17009">em_atomic_processing_end</a></div><div class="ttdeci">void em_atomic_processing_end(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d1f/event__machine__scheduler_8c_source.html#l00034">event_machine_scheduler.c:34</a></div></div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d8/d5f/group__em__eo.html#ga63161b6f46fb08a1708bad6c1fde2622">em_receive_func_t()</a>, <a class="el" href="../../dd/dd8/event__machine__queue_8h.html">event_machine_queue.h</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="../../dd/d24/atomic_processing_end_8c-example.html#a36">atomic_processing_end.c</a>, <a class="el" href="../../df/da9/queue_types_ag_8c-example.html#a66">queue_types_ag.c</a>, <a class="el" href="../../db/dcf/queue_types_local_8c-example.html#a52">queue_types_local.c</a>, and <a class="el" href="../../dd/d3c/scheduling_latency_8c-example.html#a42">scheduling_latency.c</a>.</dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d1f/event__machine__scheduler_8c_source.html#l00034">34</a> of file <a class="el" href="../../dd/d1f/event__machine__scheduler_8c_source.html">event_machine_scheduler.c</a>.</p>

</div>
</div>
<a id="ga22b178939f69c5d7115e7438f1db0019"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga22b178939f69c5d7115e7438f1db0019">&#9670;&nbsp;</a></span>em_ordered_processing_end()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void em_ordered_processing_end </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A hint to allow release of the ordered processing context.</p>
<p>This function can be used to tell the scheduler that all events to be sent under the current ordering context are already sent. Events sent after this are no longer required to be kept in order. This may increase system performance. It permits early release of the ordering context, but an EM implementation is still allowed to keep it until scheduling the next incoming event.</p>
<p>Can only be called from within the EO receive function.</p>
<p>The call is ignored if the currently active scheduling context type is not ordered (EM_SCHED_CONTEXT_TYPE_ORDERED, see <a class="el" href="../../dd/d1b/group__em__scheduler.html#ga35b0afc1114a49aa78ea56a2b64bb024">em_sched_context_type_current()</a>).</p>
<p>The ordering context cannot be resumed after it has been released.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d8/d5f/group__em__eo.html#ga63161b6f46fb08a1708bad6c1fde2622">em_receive_func_t()</a>, <a class="el" href="../../dd/dd8/event__machine__queue_8h.html">event_machine_queue.h</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="../../d4/d14/ordered_8c-example.html#a32">ordered.c</a>.</dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d1f/event__machine__scheduler_8c_source.html#l00060">60</a> of file <a class="el" href="../../dd/d1f/event__machine__scheduler_8c_source.html">event_machine_scheduler.c</a>.</p>

</div>
</div>
<a id="ga497e67a34d3651a5cfffcb8fd1fb98bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga497e67a34d3651a5cfffcb8fd1fb98bd">&#9670;&nbsp;</a></span>em_preschedule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void em_preschedule </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A hint to start scheduling for this core</p>
<p>This is a performance optimization hint with no functional effect. A hint is given to the scheduler to start scheduling the next event for the calling core as it is about to end processing of the current event. This can be used to reduce the latency of scheduling. Depending on the actual scheduler implementation, this may be a no-operation. </p>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="../../dd/d24/atomic_processing_end_8c-example.html#a37">atomic_processing_end.c</a>.</dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d1f/event__machine__scheduler_8c_source.html#l00083">83</a> of file <a class="el" href="../../dd/d1f/event__machine__scheduler_8c_source.html">event_machine_scheduler.c</a>.</p>

</div>
</div>
<a id="ga35b0afc1114a49aa78ea56a2b64bb024"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga35b0afc1114a49aa78ea56a2b64bb024">&#9670;&nbsp;</a></span>em_sched_context_type_current()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d11/event__machine__types_8h.html#af9dd68e59307d0e82e124d85ebd555b9">em_sched_context_type_t</a> em_sched_context_type_current </td>
          <td>(</td>
          <td class="paramtype">em_queue_t *&#160;</td>
          <td class="paramname"><em>queue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the currently active scheduling context type</p>
<p>Returns the current scheduling context type (none, ordered, atomic) and optionally the queue that determines the context. Note, that the scheduling context type is not the same as the queue type since the scheduling context type could have been released by the user, or inherited by local queue processing.</p>
<p>This function is mainly for handling local queues that inherit the scheduling context that was active for the sending EO. The scheduling context can be unpredictable unless the processing chain is carefully crafted. This function will return the active scheduling context type and queue of the last event from the scheduler (i.e. the scheduled queue of the EO that sent the event to the first local queue in the chain).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">queue</td><td>if not NULL, set to the queue that determines the current sched context</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>current context type</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../de/d3c/group__em__queue.html#gaef257858d1fa660524f198dba20fa9eb">em_queue_create()</a>, <a class="el" href="../../d4/d11/event__machine__types_8h.html#af9dd68e59307d0e82e124d85ebd555b9">em_sched_context_type_t</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="../../df/da9/queue_types_ag_8c-example.html#a68">queue_types_ag.c</a>.</dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d1f/event__machine__scheduler_8c_source.html#l00089">89</a> of file <a class="el" href="../../dd/d1f/event__machine__scheduler_8c_source.html">event_machine_scheduler.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
  <div id="footer" class="tabs">
   <div class="headertitle"> 
     &copy; 2017 Nokia Networks
   </div>
  </div>
 </body>
</html>
