<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EM-ODP: timer_test_ring.c</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doc-stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EM-ODP
   &#160;<span id="projectnumber">3.8.0-1</span>
   </div>
   <div id="projectbrief">Event Machine on ODP</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d6/d5d/timer_test_ring_8c-example.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">timer_test_ring.c</div>  </div>
</div><!--header-->
<div class="contents">
<p>bench:</p>
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> *   Copyright (c) 2023, Nokia Solutions and Networks</span></div>
<div class="line"><span class="comment"> *   All rights reserved.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><span class="comment"> *   modification, are permitted provided that the following conditions</span></div>
<div class="line"><span class="comment"> *   are met:</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *     * Redistributions of source code must retain the above copyright</span></div>
<div class="line"><span class="comment"> *       notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><span class="comment"> *     * Redistributions in binary form must reproduce the above copyright</span></div>
<div class="line"><span class="comment"> *       notice, this list of conditions and the following disclaimer in the</span></div>
<div class="line"><span class="comment"> *       documentation and/or other materials provided with the distribution.</span></div>
<div class="line"><span class="comment"> *     * Neither the name of the copyright holder nor the names of its</span></div>
<div class="line"><span class="comment"> *       contributors may be used to endorse or promote products derived</span></div>
<div class="line"><span class="comment"> *       from this software without specific prior written permission.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span></div>
<div class="line"><span class="comment"> *   &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span></div>
<div class="line"><span class="comment"> *   LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span></div>
<div class="line"><span class="comment"> *   A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span></div>
<div class="line"><span class="comment"> *   OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span></div>
<div class="line"><span class="comment"> *   SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span></div>
<div class="line"><span class="comment"> *   LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span></div>
<div class="line"><span class="comment"> *   DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span></div>
<div class="line"><span class="comment"> *   THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div>
<div class="line"><span class="comment"> *   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span></div>
<div class="line"><span class="comment"> *   OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * @file</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Event Machine timer ring test for alternative periodic timeouts.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * see instruction text at timer_test_ring.h.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="preprocessor">#ifndef _GNU_SOURCE</span></div>
<div class="line"><span class="preprocessor">#define _GNU_SOURCE</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;time.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;limits.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ctype.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sys/mman.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../d7/d5e/event__machine_8h.html">event_machine.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;odp_api.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../d5/dbf/event__machine__odp__ext_8h.html">event_machine/platform/event_machine_odp_ext.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;cm_setup.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;cm_error_handler.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;timer_test_ring.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define VERSION &quot;WIP v0.3&quot;</span></div>
<div class="line"><span class="keyword">struct </span>{</div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    loops;</div>
<div class="line">        <a name="_a0"></a><a class="code" href="../../d6/dfc/structem__fract__u64__t.html">em_fract_u64_t</a>  basehz[MAX_TEST_TIMERS];</div>
<div class="line">        uint64_t        multiplier[MAX_TEST_TIMERS];</div>
<div class="line">        uint64_t        res_ns[MAX_TEST_TIMERS];</div>
<div class="line">        uint64_t        max_mul[MAX_TEST_TMO];</div>
<div class="line">        uint64_t        start_offset[MAX_TEST_TMO];</div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    num_timers;</div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    looptime;</div>
<div class="line">        <span class="keywordtype">bool</span>            recreate;</div>
<div class="line">        <span class="keywordtype">bool</span>            reuse_tmo;</div>
<div class="line">        <span class="keywordtype">bool</span>            reuse_ev;</div>
<div class="line">        <span class="keywordtype">bool</span>            profile;</div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    num_tmo;</div>
<div class="line">        int64_t         delay_us;</div>
<div class="line">        <a class="code" href="../../de/dc2/group__em__timer.html#ga6c3e2d62c82f0a1b165171f8fff1ef81">em_timer_clksrc_t</a> clksrc;</div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    tracelen;</div>
<div class="line">        <span class="keywordtype">char</span>            tracefile[MAX_FILENAME];</div>
<div class="line"> </div>
<div class="line">} g_options = {</div>
<div class="line">        .loops =        1,</div>
<div class="line">        .basehz =       { {100, 0, 0 } },       <span class="comment">/* per timer */</span></div>
<div class="line">        .multiplier =   { 1 },                  <span class="comment">/* per timerout */</span></div>
<div class="line">        .res_ns =       { 0 },                  <span class="comment">/* per timer */</span></div>
<div class="line">        .max_mul =      { 8 },                  <span class="comment">/* per timer */</span></div>
<div class="line">        .start_offset = { 0 },                  <span class="comment">/* per timeout */</span></div>
<div class="line">        .num_timers =   1,</div>
<div class="line">        .looptime =     30,</div>
<div class="line">        .recreate =     <span class="keyword">false</span>,</div>
<div class="line">        .reuse_tmo =    <span class="keyword">false</span>,</div>
<div class="line">        .reuse_ev =     <span class="keyword">false</span>,</div>
<div class="line">        .profile =      <span class="keyword">false</span>,</div>
<div class="line">        .num_tmo =      1,</div>
<div class="line">        .delay_us =     0,</div>
<div class="line">        .clksrc =       0,</div>
<div class="line">        .tracelen =     0,</div>
<div class="line">        .tracefile =    <span class="stringliteral">&quot;stdout&quot;</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> timer_app_shm_t *m_shm;</div>
<div class="line"><span class="keyword">static</span> odp_shm_t odp_shm;</div>
<div class="line"><span class="keyword">static</span> odp_shm_t odp_shm_trace;</div>
<div class="line"><span class="keyword">static</span> __thread trace_entry_t *m_tracebuf;</div>
<div class="line"><span class="keyword">static</span> __thread <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> m_tracecount;</div>
<div class="line">odp_ticketlock_t tracelock;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* --------------------------------------- */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> usage(<span class="keywordtype">void</span>);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> parse_my_args(<span class="keywordtype">int</span> first, <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]);</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> app_eo_start(<span class="keywordtype">void</span> *eo_context, em_eo_t eo, <span class="keyword">const</span> <a name="_a1"></a><a class="code" href="../../de/dc0/structem__eo__conf__t.html">em_eo_conf_t</a> *conf);</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> app_eo_start_local(<span class="keywordtype">void</span> *eo_context, em_eo_t eo);</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> app_eo_stop(<span class="keywordtype">void</span> *eo_context, em_eo_t eo);</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> app_eo_stop_local(<span class="keywordtype">void</span> *eo_context, em_eo_t eo);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> app_eo_receive(<span class="keywordtype">void</span> *eo_context, em_event_t event,</div>
<div class="line">                           <a class="code" href="../../d4/d11/event__machine__types_8h.html#a49fd700da185b0f64834bf967479a992">em_event_type_t</a> type, em_queue_t queue, <span class="keywordtype">void</span> *q_context);</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> my_error_handler(em_eo_t eo, <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> error,</div>
<div class="line">                                    <a class="code" href="../../d4/d11/event__machine__types_8h.html#a0c0a929399ae33b615f8ca8018d2a69d">em_escope_t</a> escope, va_list args);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> handle_heartbeat(app_eo_ctx_t *eo_ctx, em_event_t event,</div>
<div class="line">                             app_msg_t *msgin, uint64_t now);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> handle_tmo(app_eo_ctx_t *eo_ctx, em_event_t event, uint64_t now);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> analyze_and_print(app_eo_ctx_t *eo_ctx, <span class="keywordtype">int</span> loop);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> global_summary(app_eo_ctx_t *eo_ctx);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> print_setup(<span class="keywordtype">void</span>);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> restart(app_eo_ctx_t *eo_ctx, <span class="keywordtype">int</span> count);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> delete_test_timer(app_eo_ctx_t *eo_ctx);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> create_test_timer(app_eo_ctx_t *eo_ctx);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> split_list(<span class="keywordtype">char</span> *str, uint64_t *list, <span class="keywordtype">int</span> maxnum);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> split_float_list(<span class="keywordtype">char</span> *str, <a class="code" href="../../d6/dfc/structem__fract__u64__t.html">em_fract_u64_t</a> *list, <span class="keywordtype">int</span> maxnum);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> approx_fract(<span class="keywordtype">double</span> f, <a class="code" href="../../d6/dfc/structem__fract__u64__t.html">em_fract_u64_t</a> *fract);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> fix_setup(<span class="keywordtype">void</span>);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> create_test_timeouts(app_eo_ctx_t *eo_ctx);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> delete_test_timeouts(app_eo_ctx_t *eo_ctx, <span class="keywordtype">bool</span> force);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> delete_test_events(app_eo_ctx_t *eo_ctx, <span class="keywordtype">bool</span> force);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> dump_trace(app_eo_ctx_t *eo_ctx);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> enter_cb(em_eo_t eo, <span class="keywordtype">void</span> **eo_ctx, em_event_t events[], <span class="keywordtype">int</span> num,</div>
<div class="line">                     em_queue_t *queue, <span class="keywordtype">void</span> **q_ctx);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> exit_cb(em_eo_t eo);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> extra_delay(rnd_state_t *rnd, <span class="keywordtype">int</span> core, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tmri, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tmoi);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* --------------------------------------- */</span></div>
<div class="line"><a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> my_error_handler(em_eo_t eo, <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> error,</div>
<div class="line">                             <a class="code" href="../../d4/d11/event__machine__types_8h.html#a0c0a929399ae33b615f8ca8018d2a69d">em_escope_t</a> escope, va_list args)</div>
<div class="line">{</div>
<div class="line">        <span class="keywordflow">if</span> (escope == 0xDEAD) { <span class="comment">/* test_fatal_if */</span></div>
<div class="line">                <span class="keywordtype">char</span> *file = va_arg(args, <span class="keywordtype">char</span>*);</div>
<div class="line">                <span class="keyword">const</span> <span class="keywordtype">char</span> *func = va_arg(args, <span class="keyword">const</span> <span class="keywordtype">char</span>*);</div>
<div class="line">                <span class="keyword">const</span> <span class="keywordtype">int</span> line = va_arg(args, <span class="keyword">const</span> <span class="keywordtype">int</span>);</div>
<div class="line">                <span class="keyword">const</span> <span class="keywordtype">char</span> *format = va_arg(args, <span class="keyword">const</span> <span class="keywordtype">char</span>*);</div>
<div class="line">                <span class="keyword">const</span> <span class="keywordtype">char</span> *base = basename(file);</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">                #pragma GCC diagnostic push</span></div>
<div class="line"><span class="preprocessor">                #pragma GCC diagnostic ignored &quot;-Wformat-nonliteral&quot;</span></div>
<div class="line">                        fprintf(stderr, <span class="stringliteral">&quot;FATAL - %s:%d, %s():\n&quot;</span>,</div>
<div class="line">                                base, line, func);</div>
<div class="line">                        vfprintf(stderr, format, args);</div>
<div class="line"><span class="preprocessor">                #pragma GCC diagnostic pop</span></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> test_error_handler(eo, error, escope, args);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> enter_cb(em_eo_t eo, <span class="keywordtype">void</span> **eo_ctx, em_event_t events[], <span class="keywordtype">int</span> num,</div>
<div class="line">                     em_queue_t *queue, <span class="keywordtype">void</span> **q_ctx)</div>
<div class="line">{</div>
<div class="line">        app_eo_ctx_t *<span class="keyword">const</span> my_eo_ctx = *eo_ctx;</div>
<div class="line">        <span class="keywordtype">int</span> core = <a name="a2"></a><a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>();</div>
<div class="line"> </div>
<div class="line">        (void)eo;</div>
<div class="line">        (void)queue;</div>
<div class="line">        (void)q_ctx;</div>
<div class="line">        (void)events;</div>
<div class="line">        (void)num;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (unlikely(!my_eo_ctx))</div>
<div class="line">                <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">        my_eo_ctx-&gt;cdat[core].enter_ns = TEST_TIME_FN();</div>
<div class="line">        <span class="keywordflow">if</span> (likely(my_eo_ctx-&gt;cdat[core].exit_ns))</div>
<div class="line">                my_eo_ctx-&gt;cdat[core].non_eo_ns += my_eo_ctx-&gt;cdat[core].enter_ns -</div>
<div class="line">                                                   my_eo_ctx-&gt;cdat[core].exit_ns;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> exit_cb(em_eo_t eo)</div>
<div class="line">{</div>
<div class="line">        app_eo_ctx_t *<span class="keyword">const</span> my_eo_ctx = <a name="a3"></a><a class="code" href="../../d8/d5f/group__em__eo.html#ga1262b0eefaf7840f9c2b44b7fe3ff93e">em_eo_get_context</a>(eo);</div>
<div class="line">        <span class="keywordtype">int</span> core = <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (unlikely(!my_eo_ctx))</div>
<div class="line">                <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">        my_eo_ctx-&gt;cdat[core].exit_ns = TEST_TIME_FN();</div>
<div class="line">        my_eo_ctx-&gt;cdat[core].eo_ns += my_eo_ctx-&gt;cdat[core].exit_ns -</div>
<div class="line">                                       my_eo_ctx-&gt;cdat[core].enter_ns;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">double</span> frac2float(<a class="code" href="../../d6/dfc/structem__fract__u64__t.html">em_fract_u64_t</a> frac)</div>
<div class="line">{</div>
<div class="line">        <span class="keywordtype">double</span> f = frac.<a name="a4"></a><a class="code" href="../../d6/dfc/structem__fract__u64__t.html#a9bd28db0ac7019c39300aa558b57557a">integer</a>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (frac.<a name="a5"></a><a class="code" href="../../d6/dfc/structem__fract__u64__t.html#a21e4d0cb4da3eb9e657ab465c60234a5">numer</a>)</div>
<div class="line">                f += (double)frac.<a class="code" href="../../d6/dfc/structem__fract__u64__t.html#a21e4d0cb4da3eb9e657ab465c60234a5">numer</a> / (<span class="keywordtype">double</span>)frac.<a name="a6"></a><a class="code" href="../../d6/dfc/structem__fract__u64__t.html#aca80adb3c999a862938a314d089f2c8e">denom</a>;</div>
<div class="line">        <span class="keywordflow">return</span> f;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> *tmo2ptr(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tmr, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tmo)</div>
<div class="line">{</div>
<div class="line">        <span class="keywordflow">return</span> (<span class="keywordtype">void</span> *)(((uint64_t)tmr &lt;&lt; 16) + tmo);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> ptr2tmo(<span class="keywordtype">void</span> *ptr, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *tmr, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *tmo)</div>
<div class="line">{</div>
<div class="line">        uint64_t x = (uint64_t)ptr;</div>
<div class="line"> </div>
<div class="line">        *tmo = x &amp; 0xFFFF;</div>
<div class="line">        *tmr = x &gt;&gt; 16;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> profile_add(uint64_t t1, uint64_t t2, prof_apis api,</div>
<div class="line">                               app_eo_ctx_t *eo_ctx, <span class="keywordtype">int</span> core)</div>
<div class="line">{</div>
<div class="line">        uint64_t diff = t2 - t1;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (eo_ctx-&gt;cdat[core].prof[api].min &gt; diff)</div>
<div class="line">                eo_ctx-&gt;cdat[core].prof[api].min = diff;</div>
<div class="line">        <span class="keywordflow">if</span> (eo_ctx-&gt;cdat[core].prof[api].max &lt; diff)</div>
<div class="line">                eo_ctx-&gt;cdat[core].prof[api].max = diff;</div>
<div class="line">        eo_ctx-&gt;cdat[core].prof[api].acc += diff;</div>
<div class="line">        eo_ctx-&gt;cdat[core].prof[api].num++;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> trace_add(uint64_t ts, trace_op_t op, uint32_t val,</div>
<div class="line">                             int64_t arg1, int64_t arg2, <span class="keywordtype">void</span> *arg3, <span class="keywordtype">void</span> *arg4)</div>
<div class="line">{</div>
<div class="line">        trace_entry_t *tp;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (g_options.tracelen == 0)</div>
<div class="line">                <span class="keywordflow">return</span>; <span class="comment">/* disabled */</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (unlikely(m_tracecount &gt;= g_options.tracelen)) { <span class="comment">/* overflow marker */</span></div>
<div class="line">                tp = &amp;m_tracebuf[g_options.tracelen - 1];</div>
<div class="line">                tp-&gt;ns = TEST_TIME_FN();</div>
<div class="line">                tp-&gt;op = TRACE_OP_LAST;</div>
<div class="line">                tp-&gt;val = val;</div>
<div class="line">                tp-&gt;arg1 = arg1;</div>
<div class="line">                tp-&gt;arg2 = arg2;</div>
<div class="line">                tp-&gt;arg3 = arg3;</div>
<div class="line">                tp-&gt;arg4 = arg4;</div>
<div class="line">                <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        tp = &amp;m_tracebuf[m_tracecount];</div>
<div class="line">        tp-&gt;ns = ts;</div>
<div class="line">        tp-&gt;op = op;</div>
<div class="line">        tp-&gt;val = val;</div>
<div class="line">        tp-&gt;arg1 = arg1;</div>
<div class="line">        tp-&gt;arg2 = arg2;</div>
<div class="line">        tp-&gt;arg3 = arg3;</div>
<div class="line">        tp-&gt;arg4 = arg4;</div>
<div class="line"> </div>
<div class="line">        m_tracecount++;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> extra_delay(rnd_state_t *rnd, <span class="keywordtype">int</span> core, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tmri, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tmoi)</div>
<div class="line">{</div>
<div class="line">        uint64_t t1 = TEST_TIME_FN();</div>
<div class="line">        uint64_t ns;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (g_options.delay_us &lt; 0) { <span class="comment">/* random */</span></div>
<div class="line">                int32_t r1;</div>
<div class="line"> </div>
<div class="line">                random_r(&amp;rnd-&gt;rdata, &amp;r1);</div>
<div class="line">                ns = (uint64_t)r1 % (1000 * (labs(g_options.delay_us) + 1));</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">                ns = g_options.delay_us * 1000UL;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        trace_add(TEST_TIME_FN(), TRACE_OP_DELAY, core, tmri, tmoi, (<span class="keywordtype">void</span> *)ns, NULL);</div>
<div class="line">        <span class="keywordflow">while</span> (TEST_TIME_FN() &lt; (ns + t1)) {</div>
<div class="line">                <span class="comment">/* delay */</span></div>
<div class="line">        };</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> dump_trace(app_eo_ctx_t *eo_ctx)</div>
<div class="line">{</div>
<div class="line">        <span class="keyword">static</span> <span class="keywordtype">bool</span> title = <span class="keyword">true</span>; <span class="comment">/* header once */</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (g_options.tracelen == 0)</div>
<div class="line">                <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">        FILE *df = stdout;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (strcmp(g_options.tracefile, <span class="stringliteral">&quot;stdout&quot;</span>))</div>
<div class="line">                df = fopen(g_options.tracefile, title ? <span class="stringliteral">&quot;w&quot;</span> : <span class="stringliteral">&quot;a&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!df) {</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;Failed to open dump file!\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (title) {</div>
<div class="line">                fprintf(df, <span class="stringliteral">&quot;#BEGIN RING TRACE FORMAT 1\n&quot;</span>);</div>
<div class="line">                <span class="comment">/* dump setup */</span></div>
<div class="line">                fprintf(df, <span class="stringliteral">&quot;cores,loops,num_timer,num_tmo,recreate_tmr,reuse_tmo,reuse_ev,delay_us,tracelen,ver\n&quot;</span>);</div>
<div class="line">                fprintf(df, <span class="stringliteral">&quot;%u,%u,%u,%u,%u,%u,%u,%ld,%u,%s\n&quot;</span>, m_shm-&gt;core_count,</div>
<div class="line">                        g_options.loops, g_options.num_timers, g_options.num_tmo,</div>
<div class="line">                        g_options.recreate, g_options.reuse_tmo, g_options.reuse_ev,</div>
<div class="line">                        g_options.delay_us, g_options.tracelen, VERSION);</div>
<div class="line">                <span class="comment">/* dump timeouts */</span></div>
<div class="line">                fprintf(df, <span class="stringliteral">&quot;#TMO:\ntmr,tmo,tick_hz,res_ns,base_hz,mul,startrel\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tmr = 0; tmr &lt; g_options.num_timers; tmr++)</div>
<div class="line">                        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tmo = 0; tmo &lt; g_options.num_tmo; tmo++) {</div>
<div class="line">                                fprintf(df, <span class="stringliteral">&quot;%u,%u,%lu,%lu,%f,%lu,%lu\n&quot;</span>,</div>
<div class="line">                                        tmr, tmo, eo_ctx-&gt;tick_hz[tmr], g_options.res_ns[tmr],</div>
<div class="line">                                        frac2float(g_options.basehz[tmr]),</div>
<div class="line">                                        g_options.multiplier[tmo], g_options.start_offset[tmo]);</div>
<div class="line">                        }</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* and then the trace events */</span></div>
<div class="line">                fprintf(df, <span class="stringliteral">&quot;#EVENTS:\n&quot;</span>);</div>
<div class="line">                fprintf(df, <span class="stringliteral">&quot;core,ns,op,arg1,arg2,arg3,arg4\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (uint32_t count = 0; count &lt; m_tracecount; count++) {</div>
<div class="line">                trace_entry_t *tp = &amp;m_tracebuf[count];</div>
<div class="line"> </div>
<div class="line">                test_fatal_if(tp-&gt;op &gt; TRACE_OP_LAST, <span class="stringliteral">&quot;Invalid trace op %u!&quot;</span>, tp-&gt;op);</div>
<div class="line"> </div>
<div class="line">                fprintf(df, <span class="stringliteral">&quot;%u,%lu,%s,%ld,%ld,%p,%p\n&quot;</span>,</div>
<div class="line">                        tp-&gt;val, tp-&gt;ns, trace_op_labels[tp-&gt;op],</div>
<div class="line">                        tp-&gt;arg1, tp-&gt;arg2, tp-&gt;arg3, tp-&gt;arg4);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (df != stdout)</div>
<div class="line">                fclose(df);</div>
<div class="line">        title = <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> usage(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">        printf(<span class="stringliteral">&quot;%s\n&quot;</span>, instructions);</div>
<div class="line"> </div>
<div class="line">        printf(<span class="stringliteral">&quot;Options:\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; ; i++) {</div>
<div class="line">                <span class="keywordflow">if</span> (longopts[i].name == NULL || descopts[i] == NULL)</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                printf(<span class="stringliteral">&quot;--%s or -%c: %s\n&quot;</span>, longopts[i].name, longopts[i].val, descopts[i]);</div>
<div class="line">        }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> print_timers(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">        <a name="_a7"></a><a class="code" href="../../d4/d00/structem__timer__attr__t.html">em_timer_attr_t</a> attr;</div>
<div class="line">        em_timer_t tmr[PRINT_MAX_TMRS];</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">int</span> num_timers = <a name="a8"></a><a class="code" href="../../de/dc2/group__em__timer.html#ga25b88dbbb772090d6caa5622c7017889">em_timer_get_all</a>(tmr, PRINT_MAX_TMRS);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; (num_timers &gt; PRINT_MAX_TMRS ? PRINT_MAX_TMRS : num_timers); i++) {</div>
<div class="line">                test_fatal_if(<a name="a9"></a><a class="code" href="../../de/dc2/group__em__timer.html#ga01e680281f0ae40bce6c6786fc0bcdc3">em_timer_get_attr</a>(tmr[i], &amp;attr) != <a name="a10"></a><a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;Can&#39;t get timer info\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;Timer \&quot;%s\&quot; info:\n&quot;</span>, attr.<a name="a11"></a><a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03fc2b0569742931ed610f0bd1af43ad">name</a>);</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;  -is ring: &quot;</span>);</div>
<div class="line">                <span class="keywordflow">if</span> (attr.<a name="a12"></a><a class="code" href="../../d4/d00/structem__timer__attr__t.html#a4fadbebcdbff4fcf420987ee4eb2aad0">flags</a> &amp; <a name="a13"></a><a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#ga860d15ba27f7a6270e4914f6590999a9a11317615592fd9f54dcb7f33d9d788fd">EM_TIMER_FLAG_RING</a>) {</div>
<div class="line">                        <span class="keywordtype">double</span> hz = frac2float(attr.<a name="a14"></a><a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>.<a name="a15"></a><a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#a513c9c3bc23ed596c9fbf4986b7ac129">base_hz</a>);</div>
<div class="line"> </div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot; yes (base_hz %.3f, max_mul %lu)\n&quot;</span>,</div>
<div class="line">                                   hz, attr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>.<a name="a16"></a><a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#acf1a65875710715895ad21d37a70a154">max_mul</a>);</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot;  -resolution: %&quot;</span> PRIu64 <span class="stringliteral">&quot; ns\n&quot;</span>, attr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>.<a name="a17"></a><a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#a896d2f2d25982ddcb5b8231416a03cf2">res_ns</a>);</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot;  -clk_src: %d\n&quot;</span>, attr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>.<a name="a18"></a><a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#af782096bfbf9916456befcf4f6006e5d">clk_src</a>);</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot;no\n&quot;</span>);</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot;  -resolution: %&quot;</span> PRIu64 <span class="stringliteral">&quot; ns\n&quot;</span>, attr.<a name="a19"></a><a class="code" href="../../d4/d00/structem__timer__attr__t.html#adf7a24e643b381f39fec354caf5a4bc0">resparam</a>.<a name="a20"></a><a class="code" href="../../d8/d93/structem__timer__res__param__t.html#a6a48acfe30394982686a96f1f402ac0c">res_ns</a>);</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot;  -max_tmo: %&quot;</span> PRIu64 <span class="stringliteral">&quot; ms\n&quot;</span>, attr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#adf7a24e643b381f39fec354caf5a4bc0">resparam</a>.<a name="a21"></a><a class="code" href="../../d8/d93/structem__timer__res__param__t.html#abb8211175d76213b77c952c1608fbded">max_tmo</a> / 1000);</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot;  -clk_src: %d\n&quot;</span>, attr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#adf7a24e643b381f39fec354caf5a4bc0">resparam</a>.<a name="a22"></a><a class="code" href="../../d8/d93/structem__timer__res__param__t.html#a07ed3b3b2e89e83ca36fb2efbc731c45">clk_src</a>);</div>
<div class="line">                }</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;  -num_tmo: %d\n&quot;</span>, attr.<a name="a23"></a><a class="code" href="../../d4/d00/structem__timer__attr__t.html#ae6afcdeed8fe620636b1f0391f908afc">num_tmo</a>);</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;  -tick Hz: %&quot;</span> PRIu64 <span class="stringliteral">&quot; hz\n&quot;</span>, <a name="a24"></a><a class="code" href="../../de/dc2/group__em__timer.html#gae97b08e2b1468de76a7d92342a5860ed">em_timer_get_freq</a>(tmr[i]));</div>
<div class="line">        }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* adjust timer setup basehz,mul to same lengths */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> fix_setup(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 1; i &lt; g_options.num_timers; i++) {</div>
<div class="line">                <span class="keywordflow">if</span> (g_options.basehz[i].integer == 0) {</div>
<div class="line">                        g_options.basehz[i].integer = 100;</div>
<div class="line">                        g_options.basehz[i].numer = 0;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (g_options.max_mul[i] == 0)</div>
<div class="line">                        g_options.max_mul[i] = 8;</div>
<div class="line">                <span class="comment">/* res 0 is ok = default */</span></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 1; i &lt; g_options.num_tmo; i++) {</div>
<div class="line">                <span class="keywordflow">if</span> (g_options.multiplier[i] == 0)</div>
<div class="line">                        g_options.multiplier[i] = 1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (g_options.recreate &amp;&amp; g_options.reuse_tmo) {</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;\nWARNING: Can&#39;t recreate timers AND reuse tmo, reuse disabled\n&quot;</span>);</div>
<div class="line">                g_options.reuse_tmo = <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* separate comma limited integer argument */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> split_list(<span class="keywordtype">char</span> *str, uint64_t *list, <span class="keywordtype">int</span> maxnum)</div>
<div class="line">{</div>
<div class="line">        <span class="keywordtype">int</span> num = 0;</div>
<div class="line">        <span class="keywordtype">char</span> *p = strtok(str, <span class="stringliteral">&quot;,&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span> (p) {</div>
<div class="line">                list[num] = (uint64_t)atoll(p);</div>
<div class="line">                num++;</div>
<div class="line">                <span class="keywordflow">if</span> (num &gt;= maxnum)</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                p = strtok(NULL, <span class="stringliteral">&quot;,&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> num;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* this could be better, but for now just use fixed point to 100th */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> approx_fract(<span class="keywordtype">double</span> val, <a class="code" href="../../d6/dfc/structem__fract__u64__t.html">em_fract_u64_t</a> *fract)</div>
<div class="line">{</div>
<div class="line">        <span class="keywordtype">double</span> intp;</div>
<div class="line">        <span class="keywordtype">double</span> p = modf(val, &amp;intp);</div>
<div class="line"> </div>
<div class="line">        fract-&gt;<a class="code" href="../../d6/dfc/structem__fract__u64__t.html#a21e4d0cb4da3eb9e657ab465c60234a5">numer</a> = round(100 * p);</div>
<div class="line">        fract-&gt;<a class="code" href="../../d6/dfc/structem__fract__u64__t.html#aca80adb3c999a862938a314d089f2c8e">denom</a> = 100;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* separate comma limited float argument */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> split_float_list(<span class="keywordtype">char</span> *str, <a class="code" href="../../d6/dfc/structem__fract__u64__t.html">em_fract_u64_t</a> *list, <span class="keywordtype">int</span> maxnum)</div>
<div class="line">{</div>
<div class="line">        <span class="keywordtype">int</span> num = 0;</div>
<div class="line">        <span class="keywordtype">char</span> *p = strtok(str, <span class="stringliteral">&quot;,&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span> (p) {</div>
<div class="line">                list[num].<a class="code" href="../../d6/dfc/structem__fract__u64__t.html#a9bd28db0ac7019c39300aa558b57557a">integer</a> = (uint64_t)atoll(p);</div>
<div class="line">                approx_fract(atof(p), &amp;list[num]);</div>
<div class="line">                num++;</div>
<div class="line">                <span class="keywordflow">if</span> (num &gt;= maxnum)</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                p = strtok(NULL, <span class="stringliteral">&quot;,&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> num;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> parse_my_args(<span class="keywordtype">int</span> first, <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">        optind = first + 1; <span class="comment">/* skip &#39;--&#39; */</span></div>
<div class="line">        <span class="keywordflow">while</span> (1) {</div>
<div class="line">                <span class="keywordtype">int</span> opt;</div>
<div class="line">                <span class="keywordtype">int</span> long_index;</div>
<div class="line">                <span class="keywordtype">char</span> *endptr;</div>
<div class="line">                <span class="keywordtype">long</span> num;</div>
<div class="line"> </div>
<div class="line">                opt = getopt_long(argc, argv, shortopts, longopts, &amp;long_index);</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (opt == -1)</div>
<div class="line">                        <span class="keywordflow">break</span>;  <span class="comment">/* No more options */</span></div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">switch</span> (opt) {</div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>: {</div>
<div class="line">                        uint64_t hz[MAX_TEST_TIMERS];</div>
<div class="line"> </div>
<div class="line">                        num = split_list(optarg, hz, MAX_TEST_TIMERS);</div>
<div class="line">                        <span class="keywordflow">if</span> (num &lt; 1)</div>
<div class="line">                                <span class="keywordflow">return</span> 0;</div>
<div class="line">                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num; i++) {</div>
<div class="line">                                g_options.basehz[i].integer = hz[i];</div>
<div class="line">                                g_options.basehz[i].numer = 0;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span> (num &gt; g_options.num_timers)</div>
<div class="line">                                g_options.num_timers = num;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:</div>
<div class="line">                        num = split_float_list(optarg, &amp;g_options.basehz[0], MAX_TEST_TIMERS);</div>
<div class="line">                        <span class="keywordflow">if</span> (num &lt; 1)</div>
<div class="line">                                <span class="keywordflow">return</span> 0;</div>
<div class="line">                        <span class="keywordflow">if</span> (num &gt; g_options.num_timers)</div>
<div class="line">                                g_options.num_timers = num;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;l&#39;</span>:</div>
<div class="line">                        num = strtol(optarg, &amp;endptr, 0);</div>
<div class="line">                        <span class="keywordflow">if</span> (*endptr != <span class="charliteral">&#39;\0&#39;</span> || num &lt; 1)</div>
<div class="line">                                <span class="keywordflow">return</span> 0;</div>
<div class="line">                        g_options.loops = (<span class="keywordtype">unsigned</span> int)num;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:</div>
<div class="line">                        num = strtol(optarg, &amp;endptr, 0);</div>
<div class="line">                        <span class="keywordflow">if</span> (*endptr != <span class="charliteral">&#39;\0&#39;</span> || num &lt; 1)</div>
<div class="line">                                <span class="keywordflow">return</span> 0;</div>
<div class="line">                        g_options.looptime = (int)num;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:</div>
<div class="line">                        num = strtol(optarg, &amp;endptr, 0);</div>
<div class="line">                        <span class="keywordflow">if</span> (*endptr != <span class="charliteral">&#39;\0&#39;</span> || num &lt; 0)</div>
<div class="line">                                <span class="keywordflow">return</span> 0;</div>
<div class="line">                        g_options.clksrc = (<a name="a25"></a><a class="code" href="../../de/dc2/group__em__timer.html#ga6c3e2d62c82f0a1b165171f8fff1ef81">em_timer_clksrc_t</a>)num;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:</div>
<div class="line">                        num = strtol(optarg, &amp;endptr, 0);</div>
<div class="line">                        <span class="keywordflow">if</span> (*endptr != <span class="charliteral">&#39;\0&#39;</span> || num &lt; 1)</div>
<div class="line">                                <span class="keywordflow">return</span> 0;</div>
<div class="line">                        g_options.num_tmo = (<span class="keywordtype">unsigned</span> int)num;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;T&#39;</span>:</div>
<div class="line">                        num = strtol(optarg, &amp;endptr, 0);</div>
<div class="line">                        <span class="keywordflow">if</span> (*endptr != <span class="charliteral">&#39;\0&#39;</span> || num &lt; 0)</div>
<div class="line">                                <span class="keywordflow">return</span> 0;</div>
<div class="line">                        g_options.tracelen = (<span class="keywordtype">unsigned</span> int)num;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>:</div>
<div class="line">                        num = strtol(optarg, &amp;endptr, 0);</div>
<div class="line">                        <span class="keywordflow">if</span> (*endptr != <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line">                                <span class="keywordflow">return</span> 0;</div>
<div class="line">                        g_options.delay_us = (int64_t)num;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;w&#39;</span>: { <span class="comment">/* optional arg */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (optarg != NULL) {</div>
<div class="line">                                <span class="keywordflow">if</span> (strlen(optarg) &gt;= MAX_FILENAME)</div>
<div class="line">                                        <span class="keywordflow">return</span> 0;</div>
<div class="line">                                strncpy(g_options.tracefile, optarg, MAX_FILENAME);</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>:</div>
<div class="line">                        num = split_list(optarg, &amp;g_options.res_ns[0], MAX_TEST_TIMERS);</div>
<div class="line">                        <span class="keywordflow">if</span> (num &lt; 1)</div>
<div class="line">                                <span class="keywordflow">return</span> 0;</div>
<div class="line">                        <span class="keywordflow">if</span> (num &gt; g_options.num_timers)</div>
<div class="line">                                g_options.num_timers = num;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>:</div>
<div class="line">                        num = split_list(optarg, &amp;g_options.multiplier[0], MAX_TEST_TMO);</div>
<div class="line">                        <span class="keywordflow">if</span> (num &lt; 1)</div>
<div class="line">                                <span class="keywordflow">return</span> 0;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;o&#39;</span>:</div>
<div class="line">                        num = split_list(optarg, &amp;g_options.start_offset[0], MAX_TEST_TMO);</div>
<div class="line">                        <span class="keywordflow">if</span> (num &lt; 1)</div>
<div class="line">                                <span class="keywordflow">return</span> 0;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;M&#39;</span>:</div>
<div class="line">                        num = split_list(optarg, &amp;g_options.max_mul[0], MAX_TEST_TIMERS);</div>
<div class="line">                        <span class="keywordflow">if</span> (num &lt; 1)</div>
<div class="line">                                <span class="keywordflow">return</span> 0;</div>
<div class="line">                        <span class="keywordflow">if</span> (num &gt; g_options.num_timers)</div>
<div class="line">                                g_options.num_timers = num;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;R&#39;</span>:</div>
<div class="line">                        g_options.recreate = <span class="keyword">true</span>;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;a&#39;</span>:</div>
<div class="line">                        g_options.profile = <span class="keyword">true</span>;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;N&#39;</span>:</div>
<div class="line">                        g_options.reuse_tmo = <span class="keyword">true</span>;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;E&#39;</span>:</div>
<div class="line">                        g_options.reuse_ev = <span class="keyword">true</span>;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:</div>
<div class="line">                <span class="keywordflow">default</span>:</div>
<div class="line">                        opterr = 0;</div>
<div class="line">                        usage();</div>
<div class="line">                        <span class="keywordflow">return</span> 0;</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        optind = 1; <span class="comment">/* cm_setup() to parse again */</span></div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> print_setup(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot;\nActive run options:\n&quot;</span>);</div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot; - loops:          %d\n&quot;</span>, g_options.loops);</div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot; - looptime:       %d s\n&quot;</span>, g_options.looptime);</div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot; - num timers:     %d\n&quot;</span>, g_options.num_timers);</div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot; - tmo per timer:  %d\n&quot;</span>, g_options.num_tmo);</div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot; - recreate timer: %s\n&quot;</span>, g_options.recreate ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot; - reuse tmo:      %s\n&quot;</span>, g_options.reuse_tmo ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot; - reuse event:    %s\n&quot;</span>, g_options.reuse_ev ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (g_options.tracelen) {</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot; - tracebuf:       %u\n&quot;</span>, g_options.tracelen);</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot; - tracefile:      %s\n&quot;</span>, g_options.tracefile);</div>
<div class="line">        }</div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot; - profile APIs:   %s\n&quot;</span>, g_options.profile ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot; - extra delay:    %ld us %s\n&quot;</span>, labs(g_options.delay_us),</div>
<div class="line">                   g_options.delay_us &lt; 0 ? <span class="stringliteral">&quot;(rnd)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot;\nTimer tmo  basehz          max_mul   res_ns         startrel     mul    -&gt;hz\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; g_options.num_timers; i++) {</div>
<div class="line">                <span class="keywordtype">double</span> hz = frac2float(g_options.basehz[i]);</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> t = 0; t &lt; g_options.num_tmo; t++) {</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot;%-5u %-4u %-15.3f %-9lu %-14lu %-12lu %-8lu %.3f\n&quot;</span>,</div>
<div class="line">                                   i, t, hz, g_options.max_mul[i],</div>
<div class="line">                                   g_options.res_ns[i], g_options.start_offset[t],</div>
<div class="line">                                   g_options.multiplier[t], hz * (<span class="keywordtype">double</span>)g_options.multiplier[t]);</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> delete_test_timer(app_eo_ctx_t *eo_ctx)</div>
<div class="line">{</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; g_options.num_timers; i++) {</div>
<div class="line">                <span class="keywordflow">if</span> (eo_ctx-&gt;test_tmr[i] != <a name="a26"></a><a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#aa373a94a9084c3bd6c5b23ac6bd6b176">EM_TIMER_UNDEF</a>) {</div>
<div class="line">                        trace_add(TEST_TIME_FN(), TRACE_OP_TMR_DELETE, <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>(),</div>
<div class="line">                                  i, -1, NULL, eo_ctx-&gt;test_tmr[i]);</div>
<div class="line">                        <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> rv = <a name="a27"></a><a class="code" href="../../de/dc2/group__em__timer.html#ga2bac1530b021bbbd1f0f924414c2485e">em_timer_delete</a>(eo_ctx-&gt;test_tmr[i]);</div>
<div class="line"> </div>
<div class="line">                        test_fatal_if(rv != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;Ring timer[%d] delete fail, rv %d!&quot;</span>, i, rv);</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot;Deleted test timer[%d]: %p\n&quot;</span>, i, eo_ctx-&gt;test_tmr[i]);</div>
<div class="line">                        eo_ctx-&gt;test_tmr[i] = <a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#aa373a94a9084c3bd6c5b23ac6bd6b176">EM_TIMER_UNDEF</a>;</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> create_test_timer(app_eo_ctx_t *eo_ctx)</div>
<div class="line">{</div>
<div class="line">        <a class="code" href="../../d4/d00/structem__timer__attr__t.html">em_timer_attr_t</a> rattr;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; g_options.num_timers; i++) {</div>
<div class="line">                <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> stat = <a name="a28"></a><a class="code" href="../../de/dc2/group__em__timer.html#ga3c82d75381d0cd0d5ff81f9180d92699">em_timer_ring_attr_init</a>(&amp;rattr,</div>
<div class="line">                                                           g_options.clksrc,</div>
<div class="line">                                                           g_options.basehz[i].integer,</div>
<div class="line">                                                           g_options.max_mul[i],</div>
<div class="line">                                                           g_options.res_ns[i]);</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (g_options.basehz[i].numer) {</div>
<div class="line">                        rattr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>.<a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#a513c9c3bc23ed596c9fbf4986b7ac129">base_hz</a>.<a class="code" href="../../d6/dfc/structem__fract__u64__t.html#a21e4d0cb4da3eb9e657ab465c60234a5">numer</a> = g_options.basehz[i].numer;</div>
<div class="line">                        rattr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>.<a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#a513c9c3bc23ed596c9fbf4986b7ac129">base_hz</a>.<a class="code" href="../../d6/dfc/structem__fract__u64__t.html#aca80adb3c999a862938a314d089f2c8e">denom</a> = g_options.basehz[i].denom;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (EXTRA_PRINTS) {</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot;\nInitialized ring attr:\n&quot;</span>);</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot; -clksrc:  %u\n&quot;</span>, g_options.clksrc);</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot; -num_tmo: %u\n&quot;</span>, rattr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#ae6afcdeed8fe620636b1f0391f908afc">num_tmo</a>);</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot; -base_hz: %&quot;</span> PRIu64 <span class="stringliteral">&quot;\n&quot;</span>, rattr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>.<a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#a513c9c3bc23ed596c9fbf4986b7ac129">base_hz</a>.<a class="code" href="../../d6/dfc/structem__fract__u64__t.html#a9bd28db0ac7019c39300aa558b57557a">integer</a>);</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot; -base_hz n/d: %lu/%lu\n&quot;</span>, rattr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>.<a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#a513c9c3bc23ed596c9fbf4986b7ac129">base_hz</a>.<a class="code" href="../../d6/dfc/structem__fract__u64__t.html#a21e4d0cb4da3eb9e657ab465c60234a5">numer</a>,</div>
<div class="line">                                   rattr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>.<a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#a513c9c3bc23ed596c9fbf4986b7ac129">base_hz</a>.<a class="code" href="../../d6/dfc/structem__fract__u64__t.html#aca80adb3c999a862938a314d089f2c8e">denom</a>);</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot; -max_mul: %lu\n&quot;</span>, rattr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>.<a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#acf1a65875710715895ad21d37a70a154">max_mul</a>);</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot; -res_ns:  %lu\n&quot;</span>, rattr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>.<a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#a896d2f2d25982ddcb5b8231416a03cf2">res_ns</a>);</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (stat != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>) {</div>
<div class="line">                        test_error(<a name="a29"></a><a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#ac341b7db29d8127e864a45c9bd2a4aa3">EM_ERROR_SET_FATAL</a>(0xDEAD), 0xBEEF,</div>
<div class="line">                                   <span class="stringliteral">&quot;Ring parameters not supported, ret %u!&quot;</span>, stat);</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (g_options.basehz[i].numer) { <span class="comment">/* re-check values */</span></div>
<div class="line">                        <a name="_a30"></a><a class="code" href="../../de/dcc/structem__timer__ring__param__t.html">em_timer_ring_param_t</a> ring = rattr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>;</div>
<div class="line"> </div>
<div class="line">                        <span class="keywordflow">if</span> (<a name="a31"></a><a class="code" href="../../de/dc2/group__em__timer.html#gaeae3893806e054292ba834cd1b556abc">em_timer_ring_capability</a>(&amp;rattr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>) == <a name="a32"></a><a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#a740919266fbb41b8a8127a9ef215eea0aba0bc2e7908d78aff4eea67ec219b091">EM_ERR_NOT_SUPPORTED</a>) {</div>
<div class="line">                                APPL_PRINT(<span class="stringliteral">&quot;WARN: Arguments not exactly supported:\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">                                APPL_PRINT(<span class="stringliteral">&quot;base_hz:      %lu %lu/%lu -&gt; %lu %lu/%lu\n&quot;</span>,</div>
<div class="line">                                           ring.<a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#a513c9c3bc23ed596c9fbf4986b7ac129">base_hz</a>.<a class="code" href="../../d6/dfc/structem__fract__u64__t.html#a9bd28db0ac7019c39300aa558b57557a">integer</a>, ring.<a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#a513c9c3bc23ed596c9fbf4986b7ac129">base_hz</a>.<a class="code" href="../../d6/dfc/structem__fract__u64__t.html#a21e4d0cb4da3eb9e657ab465c60234a5">numer</a>,</div>
<div class="line">                                           ring.<a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#a513c9c3bc23ed596c9fbf4986b7ac129">base_hz</a>.<a class="code" href="../../d6/dfc/structem__fract__u64__t.html#aca80adb3c999a862938a314d089f2c8e">denom</a>, rattr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>.<a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#a513c9c3bc23ed596c9fbf4986b7ac129">base_hz</a>.<a class="code" href="../../d6/dfc/structem__fract__u64__t.html#a9bd28db0ac7019c39300aa558b57557a">integer</a>,</div>
<div class="line">                                           rattr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>.<a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#a513c9c3bc23ed596c9fbf4986b7ac129">base_hz</a>.<a class="code" href="../../d6/dfc/structem__fract__u64__t.html#a21e4d0cb4da3eb9e657ab465c60234a5">numer</a>,</div>
<div class="line">                                           rattr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>.<a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#a513c9c3bc23ed596c9fbf4986b7ac129">base_hz</a>.<a class="code" href="../../d6/dfc/structem__fract__u64__t.html#aca80adb3c999a862938a314d089f2c8e">denom</a>);</div>
<div class="line">                                APPL_PRINT(<span class="stringliteral">&quot;max_mul:      %lu -&gt; %lu\n&quot;</span>,</div>
<div class="line">                                           ring.<a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#acf1a65875710715895ad21d37a70a154">max_mul</a>, rattr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>.<a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#acf1a65875710715895ad21d37a70a154">max_mul</a>);</div>
<div class="line">                                APPL_PRINT(<span class="stringliteral">&quot;res_ns:       %lu -&gt; %lu\n&quot;</span>,</div>
<div class="line">                                           ring.<a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#a896d2f2d25982ddcb5b8231416a03cf2">res_ns</a>, rattr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">ringparam</a>.<a class="code" href="../../de/dcc/structem__timer__ring__param__t.html#a896d2f2d25982ddcb5b8231416a03cf2">res_ns</a>);</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                strncpy(rattr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03fc2b0569742931ed610f0bd1af43ad">name</a>, <span class="stringliteral">&quot;RingTmr&quot;</span>, EM_TIMER_NAME_LEN);</div>
<div class="line">                em_timer_t rtmr = <a name="a33"></a><a class="code" href="../../de/dc2/group__em__timer.html#ga85e56489032dd3cf237c28e18b663189">em_timer_ring_create</a>(&amp;rattr);</div>
<div class="line"> </div>
<div class="line">                trace_add(TEST_TIME_FN(), TRACE_OP_TMR_CREATE, <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>(), i, -1, NULL, rtmr);</div>
<div class="line">                test_fatal_if(rtmr == <a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#aa373a94a9084c3bd6c5b23ac6bd6b176">EM_TIMER_UNDEF</a>, <span class="stringliteral">&quot;Ring timer create fail!&quot;</span>);</div>
<div class="line">                eo_ctx-&gt;test_tmr[i] = rtmr;</div>
<div class="line">                eo_ctx-&gt;tick_hz[i] = <a class="code" href="../../de/dc2/group__em__timer.html#gae97b08e2b1468de76a7d92342a5860ed">em_timer_get_freq</a>(rtmr);</div>
<div class="line">                <span class="keywordflow">if</span> (EXTRA_PRINTS)</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot;Created test timer[%d]: %p\n&quot;</span>, i, rtmr);</div>
<div class="line">        } <span class="comment">/* next timer */</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> create_test_timeouts(app_eo_ctx_t *eo_ctx)</div>
<div class="line">{</div>
<div class="line">        <span class="comment">/* create test timeout(s) */</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> t = 0; t &lt; g_options.num_timers; t++) {</div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> to = 0; to &lt; g_options.num_tmo; to++) {</div>
<div class="line">                        <a name="_a34"></a><a class="code" href="../../dc/dfd/structem__tmo__args__t.html">em_tmo_args_t</a> args = { .<a name="a35"></a><a class="code" href="../../dc/dfd/structem__tmo__args__t.html#ab87d50f6c09b3cbbf78b2915370d0055">userptr</a> = tmo2ptr(t, to) };</div>
<div class="line"> </div>
<div class="line">                        <span class="keywordflow">if</span> (eo_ctx-&gt;test_tmo[t][to] == <a name="a36"></a><a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#af7917fb5bc546e1339ad6e1135fd8c6d">EM_TMO_UNDEF</a>) {</div>
<div class="line">                                uint64_t t1 = TEST_TIME_FN();</div>
<div class="line"> </div>
<div class="line">                                eo_ctx-&gt;test_tmo[t][to] = <a name="a37"></a><a class="code" href="../../de/dc2/group__em__timer.html#gacc26f0fd2b18a7400ce4a23a4f6247b2">em_tmo_create_arg</a>(eo_ctx-&gt;test_tmr[t],</div>
<div class="line">                                                                            <a name="a38"></a><a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#gaade0f99e694a2f999abe467bc05fde61aac8e81389e6feaf233eff357c4ece5f0">EM_TMO_FLAG_PERIODIC</a>,</div>
<div class="line">                                                                            eo_ctx-&gt;test_q,</div>
<div class="line">                                                                            &amp;args);</div>
<div class="line">                                profile_add(t1, TEST_TIME_FN(), PROF_TMO_CREATE,</div>
<div class="line">                                            eo_ctx, <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>());</div>
<div class="line">                                trace_add(t1, TRACE_OP_TMO_CREATE, <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>(),</div>
<div class="line">                                          t, to, eo_ctx-&gt;test_tmr[t], eo_ctx-&gt;test_tmo[t][to]);</div>
<div class="line">                                test_fatal_if(eo_ctx-&gt;test_tmo[t][to] == <a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#af7917fb5bc546e1339ad6e1135fd8c6d">EM_TMO_UNDEF</a>,</div>
<div class="line">                                              <span class="stringliteral">&quot;Can&#39;t allocate test_tmo!\n&quot;</span>);</div>
<div class="line">                        }</div>
<div class="line"> </div>
<div class="line">                        uint64_t tick_now = <a name="a39"></a><a class="code" href="../../de/dc2/group__em__timer.html#gaabb77ed31727a32d041f9d308a0a3886">em_timer_current_tick</a>(eo_ctx-&gt;test_tmr[t]);</div>
<div class="line">                        uint64_t t1 = TEST_TIME_FN();</div>
<div class="line">                        uint64_t startabs = 0;</div>
<div class="line"> </div>
<div class="line">                        <span class="keywordflow">if</span> (g_options.start_offset[to])</div>
<div class="line">                                startabs = tick_now + g_options.start_offset[to];</div>
<div class="line">                        trace_add(t1, TRACE_OP_TMO_SET, <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>(),</div>
<div class="line">                                  t, to, (<span class="keywordtype">void</span> *)tick_now, eo_ctx-&gt;test_ev[t][to]);</div>
<div class="line">                        t1 = TEST_TIME_FN();</div>
<div class="line">                        <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> stat = <a name="a40"></a><a class="code" href="../../de/dc2/group__em__timer.html#ga4225ba6bde991c6419461075d031c3dc">em_tmo_set_periodic_ring</a>(eo_ctx-&gt;test_tmo[t][to],</div>
<div class="line">                                                                    startabs,</div>
<div class="line">                                                                    g_options.multiplier[to],</div>
<div class="line">                                                                    eo_ctx-&gt;test_ev[t][to]);</div>
<div class="line"> </div>
<div class="line">                        profile_add(t1, TEST_TIME_FN(), PROF_TMO_SET, eo_ctx, <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>());</div>
<div class="line">                        test_fatal_if(stat != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;Can&#39;t activate test tmo[%d][%d], ret %u!\n&quot;</span>,</div>
<div class="line">                                      t, to, stat);</div>
<div class="line">                        eo_ctx-&gt;first_time[t][to] = t1;</div>
<div class="line">                        eo_ctx-&gt;test_ev[t][to] = <a name="a41"></a><a class="code" href="../../d4/d11/event__machine__types_8h.html#a8542d9c2c9a29e35ff042b1d59cc479b">EM_EVENT_UNDEF</a>; <span class="comment">/* now given to timer */</span></div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> delete_test_timeouts(app_eo_ctx_t *eo_ctx, <span class="keywordtype">bool</span> force)</div>
<div class="line">{</div>
<div class="line">        <span class="keywordtype">int</span> core = <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* force == true means final cleanup, otherwise may skip if reuse option is active */</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ti = 0; ti &lt; g_options.num_timers; ti++) {</div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tmoi = 0; tmoi &lt; g_options.num_tmo; tmoi++) {</div>
<div class="line">                        <span class="keywordflow">if</span> (eo_ctx-&gt;test_tmo[ti][tmoi] == <a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#af7917fb5bc546e1339ad6e1135fd8c6d">EM_TMO_UNDEF</a>)</div>
<div class="line">                                <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">                        <a class="code" href="../../de/dc2/group__em__timer.html#ga3857ab06946e6b4047352d5d84ffff4d">em_tmo_state_t</a> s = <a name="a42"></a><a class="code" href="../../de/dc2/group__em__timer.html#ga66476f77546996eea9acebaa471c1b52">em_tmo_get_state</a>(eo_ctx-&gt;test_tmo[ti][tmoi]);</div>
<div class="line"> </div>
<div class="line">                        test_fatal_if(s == <a name="a43"></a><a class="code" href="../../de/dc2/group__em__timer.html#gga3857ab06946e6b4047352d5d84ffff4daa54abf62265d1c2beaeeadb6a1ee240f">EM_TMO_STATE_ACTIVE</a>,</div>
<div class="line">                                      <span class="stringliteral">&quot;Unexpected tmo state ACTIVE after cancel\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">                        <span class="keywordflow">if</span> (!g_options.reuse_tmo || force) {</div>
<div class="line">                                em_event_t ev = <a class="code" href="../../d4/d11/event__machine__types_8h.html#a8542d9c2c9a29e35ff042b1d59cc479b">EM_EVENT_UNDEF</a>;</div>
<div class="line">                                uint64_t t1 = TEST_TIME_FN();</div>
<div class="line"> </div>
<div class="line">                                trace_add(t1, TRACE_OP_TMO_DELETE, core,</div>
<div class="line">                                          ti, tmoi, NULL, eo_ctx-&gt;test_tmo[ti][tmoi]);</div>
<div class="line"> </div>
<div class="line">                                <a class="code" href="../../de/dc2/group__em__timer.html#ga3857ab06946e6b4047352d5d84ffff4d">em_tmo_state_t</a> tmo_state;</div>
<div class="line"> </div>
<div class="line">                                tmo_state = <a class="code" href="../../de/dc2/group__em__timer.html#ga66476f77546996eea9acebaa471c1b52">em_tmo_get_state</a>(eo_ctx-&gt;test_tmo[ti][tmoi]);</div>
<div class="line">                                <span class="keywordflow">if</span> (tmo_state == <a class="code" href="../../de/dc2/group__em__timer.html#gga3857ab06946e6b4047352d5d84ffff4daa54abf62265d1c2beaeeadb6a1ee240f">EM_TMO_STATE_ACTIVE</a>)</div>
<div class="line">                                        <a name="a44"></a><a class="code" href="../../de/dc2/group__em__timer.html#ga786f0cc89e9bdfda1c1274165600f0ef">em_tmo_cancel</a>(eo_ctx-&gt;test_tmo[ti][tmoi], &amp;ev);</div>
<div class="line"> </div>
<div class="line">                                <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> rv = <a name="a45"></a><a class="code" href="../../de/dc2/group__em__timer.html#ga67d2db5f72ccdd285649ce05b0a22a92">em_tmo_delete</a>(eo_ctx-&gt;test_tmo[ti][tmoi]);</div>
<div class="line"> </div>
<div class="line">                                profile_add(t1, TEST_TIME_FN(), PROF_TMO_DELETE, eo_ctx, core);</div>
<div class="line">                                test_fatal_if(rv != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;tmo_delete fail, tmo = %p!&quot;</span>,</div>
<div class="line">                                              eo_ctx-&gt;test_tmo[ti][tmoi]);</div>
<div class="line">                                test_fatal_if(ev != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a8542d9c2c9a29e35ff042b1d59cc479b">EM_EVENT_UNDEF</a>,</div>
<div class="line">                                              <span class="stringliteral">&quot;Unexpected - tmo delete returned event %p&quot;</span>, ev);</div>
<div class="line">                                eo_ctx-&gt;test_tmo[ti][tmoi] = <a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#af7917fb5bc546e1339ad6e1135fd8c6d">EM_TMO_UNDEF</a>;</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> delete_test_events(app_eo_ctx_t *eo_ctx, <span class="keywordtype">bool</span> force)</div>
<div class="line">{</div>
<div class="line">        <span class="keywordtype">int</span> core = <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ti = 0; ti &lt; g_options.num_timers; ti++) {</div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tmoi = 0; tmoi &lt; g_options.num_tmo; tmoi++) {</div>
<div class="line">                        <span class="keywordflow">if</span> (eo_ctx-&gt;test_ev[ti][tmoi] == <a class="code" href="../../d4/d11/event__machine__types_8h.html#a8542d9c2c9a29e35ff042b1d59cc479b">EM_EVENT_UNDEF</a>)</div>
<div class="line">                                <span class="keywordflow">continue</span>;</div>
<div class="line">                        <span class="keywordflow">if</span> (!g_options.reuse_ev || force) {</div>
<div class="line">                                trace_add(TEST_TIME_FN(), TRACE_OP_TMO_EV_FREE,</div>
<div class="line">                                          core, ti, tmoi, eo_ctx-&gt;test_tmo[ti][tmoi],</div>
<div class="line">                                          eo_ctx-&gt;test_ev[ti][tmoi]);</div>
<div class="line">                                <a name="a46"></a><a class="code" href="../../d5/d33/group__em__event.html#gad4f97ba217518d967f8078c56023c4d4">em_free</a>(eo_ctx-&gt;test_ev[ti][tmoi]);</div>
<div class="line">                                eo_ctx-&gt;test_ev[ti][tmoi] = <a class="code" href="../../d4/d11/event__machine__types_8h.html#a8542d9c2c9a29e35ff042b1d59cc479b">EM_EVENT_UNDEF</a>;</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> restart(app_eo_ctx_t *eo_ctx, <span class="keywordtype">int</span> count)</div>
<div class="line">{</div>
<div class="line">        <span class="keywordflow">if</span> (g_options.recreate)</div>
<div class="line">                create_test_timer(eo_ctx);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* clear event counts, leave profiles */</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c = 0; c &lt; m_shm-&gt;core_count; c++)</div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> t = 0; t &lt; g_options.num_timers; t++)</div>
<div class="line">                        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> to = 0; to &lt; g_options.num_tmo; to++)</div>
<div class="line">                                eo_ctx-&gt;cdat[c].count[t][to] = 0;</div>
<div class="line"> </div>
<div class="line">        eo_ctx-&gt;state = STATE_START;</div>
<div class="line">        eo_ctx-&gt;next_change = count + 2;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> handle_heartbeat(app_eo_ctx_t *eo_ctx, em_event_t event, app_msg_t *msgin, uint64_t now)</div>
<div class="line">{</div>
<div class="line">        <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> loops;</div>
<div class="line">        em_event_t ev = <a class="code" href="../../d4/d11/event__machine__types_8h.html#a8542d9c2c9a29e35ff042b1d59cc479b">EM_EVENT_UNDEF</a>;</div>
<div class="line"> </div>
<div class="line">        (void)eo_ctx;</div>
<div class="line">        (void)now;</div>
<div class="line"> </div>
<div class="line">        trace_add(now, TRACE_OP_HB_RX, <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>(), msgin-&gt;count, eo_ctx-&gt;state, NULL, event);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (EXTRA_PRINTS)</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        msgin-&gt;count++;</div>
<div class="line">        <span class="keywordflow">if</span> (msgin-&gt;count &gt;= eo_ctx-&gt;next_change) { <span class="comment">/* time to do something */</span></div>
<div class="line">                <span class="comment">/* State machine for test cycle (loop). Runs on heartbeat timeout every second.</span></div>
<div class="line"><span class="comment">                 * Some time is added between states so startup, printing etc is not causing jitter</span></div>
<div class="line"><span class="comment">                 * to time stamping</span></div>
<div class="line"><span class="comment">                 */</span></div>
<div class="line">                <span class="keywordtype">int</span> state = eo_ctx-&gt;state;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">switch</span> (state) {</div>
<div class="line">                <span class="keywordflow">case</span> STATE_START:</div>
<div class="line">                        <span class="keywordflow">if</span> (loops == 0) {</div>
<div class="line">                                create_test_timer(eo_ctx);</div>
<div class="line">                                print_timers();</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span> (EXTRA_PRINTS)</div>
<div class="line">                                APPL_PRINT(<span class="stringliteral">&quot;START\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">                        <span class="comment">/* start */</span></div>
<div class="line">                        eo_ctx-&gt;start_time = TEST_TIME_FN();</div>
<div class="line">                        eo_ctx-&gt;state++; <span class="comment">/* atomic, go to RUN */</span></div>
<div class="line">                        create_test_timeouts(eo_ctx);</div>
<div class="line">                        eo_ctx-&gt;next_change = msgin-&gt;count + g_options.looptime;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> STATE_RUN:</div>
<div class="line">                        eo_ctx-&gt;state++; <span class="comment">/* go to STOP */</span></div>
<div class="line">                        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ti = 0; ti &lt; g_options.num_timers; ti++) {</div>
<div class="line">                                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tmoi = 0; tmoi &lt; g_options.num_tmo; tmoi++) {</div>
<div class="line">                                        <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> rv;</div>
<div class="line">                                        uint64_t t1 = TEST_TIME_FN();</div>
<div class="line"> </div>
<div class="line">                                        rv = <a class="code" href="../../de/dc2/group__em__timer.html#ga786f0cc89e9bdfda1c1274165600f0ef">em_tmo_cancel</a>(eo_ctx-&gt;test_tmo[ti][tmoi], &amp;ev);</div>
<div class="line">                                        profile_add(t1, TEST_TIME_FN(), PROF_TMO_CANCEL,</div>
<div class="line">                                                    eo_ctx, <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>());</div>
<div class="line">                                        trace_add(t1, TRACE_OP_TMO_CANCEL, <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>(),</div>
<div class="line">                                                  ti, tmoi, ev, eo_ctx-&gt;test_tmo[ti][tmoi]);</div>
<div class="line">                                        test_fatal_if(rv != <a name="a47"></a><a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#a740919266fbb41b8a8127a9ef215eea0ae173e1529a1b79dedd05c6eb5d15e24c">EM_ERR_TOONEAR</a>,</div>
<div class="line">                                                      <span class="stringliteral">&quot;cancel did not return expected TOONEAR!&quot;</span>);</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                        eo_ctx-&gt;next_change = msgin-&gt;count + 3;  <span class="comment">/* enough to get all remaining */</span></div>
<div class="line">                        eo_ctx-&gt;stop_time = TEST_TIME_FN();</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> STATE_STOP:</div>
<div class="line">                        <span class="keywordflow">if</span> (EXTRA_PRINTS)</div>
<div class="line">                                APPL_PRINT(<span class="stringliteral">&quot;\nSTOP\n&quot;</span>);</div>
<div class="line">                        delete_test_timeouts(eo_ctx, <span class="keyword">false</span>);</div>
<div class="line">                        delete_test_events(eo_ctx, <span class="keyword">false</span>);</div>
<div class="line">                        eo_ctx-&gt;state++;  <span class="comment">/* go to ANALYZE */</span></div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> STATE_ANALYZE:</div>
<div class="line">                        loops++;</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot;\n\nLoop completed\n&quot;</span>);</div>
<div class="line">                        analyze_and_print(eo_ctx, loops);</div>
<div class="line"> </div>
<div class="line">                        <span class="keywordflow">if</span> (loops &gt;= g_options.loops) { <span class="comment">/* all done, cleanup and summary */</span></div>
<div class="line">                                <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> rv = <a class="code" href="../../de/dc2/group__em__timer.html#ga786f0cc89e9bdfda1c1274165600f0ef">em_tmo_cancel</a>(eo_ctx-&gt;heartbeat_tmo, &amp;ev);</div>
<div class="line"> </div>
<div class="line">                                test_fatal_if(rv != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a> &amp;&amp; rv != <a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#a740919266fbb41b8a8127a9ef215eea0ae173e1529a1b79dedd05c6eb5d15e24c">EM_ERR_TOONEAR</a>, <span class="stringliteral">&quot;HB cncl fail&quot;</span>);</div>
<div class="line">                                test_fatal_if(ev != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a8542d9c2c9a29e35ff042b1d59cc479b">EM_EVENT_UNDEF</a>,</div>
<div class="line">                                              <span class="stringliteral">&quot;not expecting event on cancel (at receive)&quot;</span>);</div>
<div class="line">                                eo_ctx-&gt;state++;  <span class="comment">/* go to EXIT next */</span></div>
<div class="line">                                delete_test_timeouts(eo_ctx, <span class="keyword">true</span>);</div>
<div class="line">                                delete_test_events(eo_ctx, <span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line">                                global_summary(eo_ctx);</div>
<div class="line"> </div>
<div class="line">                                APPL_PRINT(<span class="stringliteral">&quot;Done, raising SIGINT!\n&quot;</span>);</div>
<div class="line">                                trace_add(TEST_TIME_FN(), TRACE_OP_SIGINT, <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>(),</div>
<div class="line">                                          loops, -1, NULL, NULL);</div>
<div class="line">                                <span class="keyword">raise</span>(SIGINT);</div>
<div class="line">                                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="comment">/* next loop, re-start */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (g_options.recreate)</div>
<div class="line">                                delete_test_timer(eo_ctx);</div>
<div class="line">                        restart(eo_ctx, msgin-&gt;count);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> STATE_EXIT:</div>
<div class="line">                        <span class="keywordflow">if</span> (EXTRA_PRINTS)</div>
<div class="line">                                APPL_PRINT(<span class="stringliteral">&quot;EXIT\n&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">/* don&#39;t ack anymore */</span></div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">default</span>:</div>
<div class="line">                        test_error(<a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#ac341b7db29d8127e864a45c9bd2a4aa3">EM_ERROR_SET_FATAL</a>(0xDEAD), 0xBEEF,</div>
<div class="line">                                   <span class="stringliteral">&quot;State invalid! %d\n&quot;</span>, eo_ctx-&gt;state);</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        trace_add(TEST_TIME_FN(), TRACE_OP_TMO_ACK, <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>(), -1, -1, NULL, event);</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> stat = <a name="a48"></a><a class="code" href="../../de/dc2/group__em__timer.html#gaf65f50c383b579720a31154b04ea610e">em_tmo_ack</a>(msgin-&gt;tmo, event);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (stat == <a name="a49"></a><a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#a740919266fbb41b8a8127a9ef215eea0a5e2e63f7ddf4a916caa09f43a07d9fb3">EM_ERR_CANCELED</a>)</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">/* free event */</span></div>
<div class="line">        <span class="keywordflow">if</span> (stat != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>)</div>
<div class="line">                test_error(<a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#ac341b7db29d8127e864a45c9bd2a4aa3">EM_ERROR_SET_FATAL</a>(0xDEAD), 0xBEEF,</div>
<div class="line">                           <span class="stringliteral">&quot;HB ack failed, ret %u, count %ld&quot;</span>, stat, msgin-&gt;count);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> handle_tmo(app_eo_ctx_t *eo_ctx, em_event_t event, uint64_t now)</div>
<div class="line">{</div>
<div class="line">        (void)eo_ctx;</div>
<div class="line">        (void)now;</div>
<div class="line"> </div>
<div class="line">        <a name="_a50"></a><a class="code" href="../../dd/d32/structem__timer__timeout__t.html">em_tmo_t</a> tmo;</div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tmri, tmoi;</div>
<div class="line">        <span class="keywordtype">int</span> core = <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>();</div>
<div class="line"> </div>
<div class="line">        test_fatal_if(<a name="a51"></a><a class="code" href="../../de/dc2/group__em__timer.html#ga20a84e2f8b65dbaf916ec45a1ade1ee3">em_tmo_get_type</a>(event, &amp;tmo, <span class="keyword">false</span>) != <a name="a52"></a><a class="code" href="../../de/dc2/group__em__timer.html#ggafc12eb3000ea78f2493b1e36b832f63badea7e33cc1c34e598f387f0909ca471c">EM_TMO_TYPE_PERIODIC</a>, <span class="stringliteral">&quot;not a TMO?!&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* event has no user specific content, userptr holds encoded indexes */</span></div>
<div class="line">        ptr2tmo(<a name="a53"></a><a class="code" href="../../de/dc2/group__em__timer.html#gaf80b501272a9a7d416cf7e2018703973">em_tmo_get_userptr</a>(event, NULL), &amp;tmri, &amp;tmoi);</div>
<div class="line">        test_fatal_if(tmri &gt;= MAX_TEST_TIMERS || tmoi &gt;= MAX_TEST_TMO,</div>
<div class="line">                      <span class="stringliteral">&quot;Too large index, event corrupted?&quot;</span>);</div>
<div class="line">        test_fatal_if(tmo != eo_ctx-&gt;test_tmo[tmri][tmoi],</div>
<div class="line">                      <span class="stringliteral">&quot;tmo handle [%u][%u] does not match expected %p-&gt;%p\n&quot;</span>,</div>
<div class="line">                      tmri, tmoi, eo_ctx-&gt;test_tmo[tmri][tmoi], tmo);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* use passed rx timestamp for better accuracy. Could still improve by debug timestamps */</span></div>
<div class="line">        uint64_t tick = <a class="code" href="../../de/dc2/group__em__timer.html#gaabb77ed31727a32d041f9d308a0a3886">em_timer_current_tick</a>(eo_ctx-&gt;test_tmr[tmri]);</div>
<div class="line"> </div>
<div class="line">        trace_add(now, TRACE_OP_TMO_RX, core, tmri, tmoi, (<span class="keywordtype">void</span> *)tick, event);</div>
<div class="line">        eo_ctx-&gt;cdat[core].count[tmri][tmoi]++;</div>
<div class="line">        trace_add(TEST_TIME_FN(), TRACE_OP_TMO_ACK, core, tmri, tmoi, tmo, event);</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> stat;</div>
<div class="line">        uint64_t t1 = TEST_TIME_FN();</div>
<div class="line"> </div>
<div class="line">        stat = <a class="code" href="../../de/dc2/group__em__timer.html#gaf65f50c383b579720a31154b04ea610e">em_tmo_ack</a>(tmo, event);</div>
<div class="line">        profile_add(t1, TEST_TIME_FN(), PROF_TMO_ACK, eo_ctx, core);</div>
<div class="line">        <span class="keywordflow">if</span> (stat == <a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#a740919266fbb41b8a8127a9ef215eea0a5e2e63f7ddf4a916caa09f43a07d9fb3">EM_ERR_CANCELED</a>) { <span class="comment">/* last event */</span></div>
<div class="line">                trace_add(TEST_TIME_FN(), TRACE_OP_TMO_ACK_LAST, core, tmri, tmoi, tmo, event);</div>
<div class="line">                eo_ctx-&gt;last_time[tmri][tmoi] = now;</div>
<div class="line">                <span class="keywordflow">if</span> (EXTRA_PRINTS)</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot;last timeout[%u][%u]\n&quot;</span>, tmri, tmoi);</div>
<div class="line">                <span class="keywordflow">if</span> (g_options.reuse_ev) {</div>
<div class="line">                        eo_ctx-&gt;test_ev[tmri][tmoi] = event; <span class="comment">/* event for tmo re-start */</span></div>
<div class="line">                        <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">/* don&#39;t free in receive */</span></div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">/* now allowed to free */</span></div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        test_fatal_if(stat != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;Test tmo[%u][%u] ack returned %u!\n&quot;</span>, tmri, tmoi, stat);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (g_options.delay_us != 0)</div>
<div class="line">                extra_delay(&amp;eo_ctx-&gt;cdat[core].rnd, core, tmri, tmoi);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> global_summary(app_eo_ctx_t *eo_ctx)</div>
<div class="line">{</div>
<div class="line">        <span class="keywordtype">int</span> cores = m_shm-&gt;core_count;</div>
<div class="line"> </div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot;\nGLOBAL SUMMARY:\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (g_options.profile) {</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;\nTiming profiles:\n&quot;</span>);</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;api             count           min             max             avg (ns)\n&quot;</span>);</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;------------------------------------------------------------------------\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> p = 0; p &lt; PROF_TMO_LAST; p++) {</div>
<div class="line">                        prof_t pdat = { 0 };</div>
<div class="line"> </div>
<div class="line">                        pdat.min = UINT64_MAX;</div>
<div class="line">                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = 0; c &lt; cores; c++) {</div>
<div class="line">                                <span class="keywordflow">if</span> (eo_ctx-&gt;cdat[c].prof[p].min &lt; pdat.min)</div>
<div class="line">                                        pdat.min = eo_ctx-&gt;cdat[c].prof[p].min;</div>
<div class="line">                                <span class="keywordflow">if</span> (eo_ctx-&gt;cdat[c].prof[p].max &gt; pdat.max)</div>
<div class="line">                                        pdat.max = eo_ctx-&gt;cdat[c].prof[p].max;</div>
<div class="line">                                pdat.num += eo_ctx-&gt;cdat[c].prof[p].num;</div>
<div class="line">                                pdat.acc += eo_ctx-&gt;cdat[c].prof[p].acc;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span> (pdat.num == 0)</div>
<div class="line">                                <span class="keywordflow">continue</span>;</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot;%-15s %-15lu %-15lu %-15lu %-15lu\n&quot;</span>,</div>
<div class="line">                                   prof_names[p], pdat.num, pdat.min,</div>
<div class="line">                                   pdat.max, pdat.acc / pdat.num);</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot;\ncore   EO utilization\n&quot;</span>);</div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot;---------------------\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = 0; c &lt; cores; c++) {</div>
<div class="line">                <span class="keywordtype">double</span> load = (double)eo_ctx-&gt;cdat[c].eo_ns /</div>
<div class="line">                              (<span class="keywordtype">double</span>)(eo_ctx-&gt;cdat[c].non_eo_ns + eo_ctx-&gt;cdat[c].eo_ns);</div>
<div class="line"> </div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;%-7d%.2f %%\n&quot;</span>, c, load * 100);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* more analysis from e.g. trace data could be implemented here */</span></div>
<div class="line"> </div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> analyze_and_print(app_eo_ctx_t *eo_ctx, <span class="keywordtype">int</span> loop)</div>
<div class="line">{</div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot;Analysis for loop %u :\n&quot;</span>, loop);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">int</span> cores = m_shm-&gt;core_count;</div>
<div class="line">        uint64_t counts[MAX_TEST_TIMERS][MAX_TEST_TMO];</div>
<div class="line"> </div>
<div class="line">        memset(counts, 0, <span class="keyword">sizeof</span>(counts));</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; cores ; i++)</div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> t = 0; t &lt; g_options.num_timers; t++)</div>
<div class="line">                        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> to = 0; to &lt; g_options.num_tmo; to++)</div>
<div class="line">                                counts[t][to] += eo_ctx-&gt;cdat[i].count[t][to];</div>
<div class="line"> </div>
<div class="line">        uint64_t total = 0;</div>
<div class="line"> </div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot;tmr   tmo   secs       tmos       -&gt;hz           setup_hz     error %%\n&quot;</span>);</div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot;---------------------------------------------------------------------\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> t = 0; t &lt; g_options.num_timers; t++) {</div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> to = 0; to &lt; g_options.num_tmo; to++) {</div>
<div class="line">                        int64_t ttime = (int64_t)eo_ctx-&gt;last_time[t][to] -</div>
<div class="line">                                        (int64_t)eo_ctx-&gt;first_time[t][to];</div>
<div class="line">                        <span class="keywordtype">double</span> secs = (double)ttime / 1000000000;</div>
<div class="line">                        <span class="keywordtype">double</span> tested_hz = ((double)(counts[t][to] - 1)) / fabs(secs);</div>
<div class="line">                        <span class="keywordtype">double</span> setup_hz = frac2float(g_options.basehz[t]);</div>
<div class="line"> </div>
<div class="line">                        setup_hz *= g_options.multiplier[to];</div>
<div class="line">                        <span class="keywordtype">double</span> errorp = ((tested_hz - setup_hz) / setup_hz) * 100;</div>
<div class="line"> </div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot;%-5u %-5u %-10.4f %-12lu %-12.4f %-12.4f %-12.3f\n&quot;</span>,</div>
<div class="line">                                   t, to, secs, counts[t][to], tested_hz, setup_hz, errorp);</div>
<div class="line">                        total += counts[t][to];</div>
<div class="line"> </div>
<div class="line">                        <span class="comment">/* calculations are invalid if last event was not received */</span></div>
<div class="line">                        <span class="keywordflow">if</span> ((int64_t)eo_ctx-&gt;last_time[t][to] -</div>
<div class="line">                            (int64_t)eo_ctx-&gt;first_time[t][to] &lt; 1)</div>
<div class="line">                                APPL_PRINT(<span class="stringliteral">&quot;WARN: last event for tmo[%u][%u] not received?\n&quot;</span>,</div>
<div class="line">                                           t, to);</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">double</span> runsecs = (double)(eo_ctx-&gt;stop_time - eo_ctx-&gt;start_time) / 1000000000;</div>
<div class="line"> </div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot;\n%lu total timeouts received in %.3f s -&gt; %.4f M tmo / sec\n\n&quot;</span>,</div>
<div class="line">                   total, runsecs, ((<span class="keywordtype">double</span>)total / runsecs) / 1000000);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> test_init(<span class="keyword">const</span> appl_conf_t *appl_conf)</div>
<div class="line">{</div>
<div class="line">        (void)appl_conf;</div>
<div class="line">        <span class="keywordtype">int</span> core = <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* first core creates shared memory */</span></div>
<div class="line">        <span class="keywordflow">if</span> (core == 0) {</div>
<div class="line">                odp_shm = odp_shm_reserve(SHM_NAME, <span class="keyword">sizeof</span>(timer_app_shm_t), 64, 0);</div>
<div class="line">                <span class="keywordflow">if</span> (odp_shm == ODP_SHM_INVALID) {</div>
<div class="line">                        test_error(<a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#ac341b7db29d8127e864a45c9bd2a4aa3">EM_ERROR_SET_FATAL</a>(0xDEAD), 0xBEEF,</div>
<div class="line">                                   <span class="stringliteral">&quot;shm init failed on EM-core: %u&quot;</span>, core);</div>
<div class="line">                }</div>
<div class="line">                m_shm = odp_shm_addr(odp_shm);</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* initialize it */</span></div>
<div class="line">                <span class="keywordflow">if</span> (m_shm)</div>
<div class="line">                        memset(m_shm, 0, <span class="keyword">sizeof</span>(timer_app_shm_t));</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                        test_error(<a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#ac341b7db29d8127e864a45c9bd2a4aa3">EM_ERROR_SET_FATAL</a>(0xDEAD), 0xBEEF,</div>
<div class="line">                                   <span class="stringliteral">&quot;ShMem init failed on EM-core: %u&quot;</span>, core);</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (EXTRA_PRINTS)</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot;%luk shared memory for app context\n&quot;</span>,</div>
<div class="line">                                   <span class="keyword">sizeof</span>(timer_app_shm_t) / 1024);</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* Store the number of EM-cores running the application */</span></div>
<div class="line">                m_shm-&gt;core_count = appl_conf-&gt;core_count;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (g_options.tracelen) {</div>
<div class="line">                        <span class="keywordtype">size_t</span> tlen = m_shm-&gt;core_count *</div>
<div class="line">                                      g_options.tracelen * <span class="keyword">sizeof</span>(trace_entry_t);</div>
<div class="line"> </div>
<div class="line">                        odp_shm_trace = odp_shm_reserve(SHM_TRACE_NAME, tlen, 64, 0);</div>
<div class="line">                        <span class="keywordflow">if</span> (odp_shm_trace == ODP_SHM_INVALID) {</div>
<div class="line">                                test_error(<a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#ac341b7db29d8127e864a45c9bd2a4aa3">EM_ERROR_SET_FATAL</a>(0xDEAD), 0xBEEF,</div>
<div class="line">                                           <span class="stringliteral">&quot;trace shm init failed on EM-core: %u&quot;</span>, core);</div>
<div class="line">                        }</div>
<div class="line">                        m_tracebuf = odp_shm_addr(odp_shm_trace);</div>
<div class="line">                        <span class="keywordflow">if</span> (m_tracebuf)</div>
<div class="line">                                memset(m_tracebuf, 0, tlen);</div>
<div class="line">                        <span class="keywordflow">if</span> (EXTRA_PRINTS)</div>
<div class="line">                                APPL_PRINT(<span class="stringliteral">&quot;%luk shared memory for trace\n&quot;</span>, tlen / 1024);</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                        odp_shm_trace = ODP_SHM_INVALID;</div>
<div class="line">                }</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="comment">/* lookup memory from core 0 init */</span></div>
<div class="line">                odp_shm = odp_shm_lookup(SHM_NAME);</div>
<div class="line">                test_fatal_if(odp_shm == ODP_SHM_INVALID, <span class="stringliteral">&quot;shared mem lookup fail&quot;</span>);</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (g_options.tracelen) {</div>
<div class="line">                        odp_shm_trace = odp_shm_lookup(SHM_TRACE_NAME);</div>
<div class="line">                        test_fatal_if(odp_shm_trace == ODP_SHM_INVALID,</div>
<div class="line">                                      <span class="stringliteral">&quot;trace shared mem lookup fail&quot;</span>);</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                m_shm = odp_shm_addr(odp_shm);</div>
<div class="line">                <span class="keywordflow">if</span> (!m_shm)</div>
<div class="line">                        test_error(<a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#ac341b7db29d8127e864a45c9bd2a4aa3">EM_ERROR_SET_FATAL</a>(0xDEAD), 0xBEEF,</div>
<div class="line">                                   <span class="stringliteral">&quot;ShMem init failed on EM-core: %u&quot;</span>, core);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (EXTRA_PRINTS)</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;Shared mem at %p on core %d\n&quot;</span>, m_shm, core);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (g_options.tracelen) {</div>
<div class="line">                m_tracebuf = odp_shm_addr(odp_shm_trace);</div>
<div class="line">                <span class="keywordflow">if</span> (m_tracebuf == NULL)</div>
<div class="line">                        test_error(<a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#ac341b7db29d8127e864a45c9bd2a4aa3">EM_ERROR_SET_FATAL</a>(0xDEAD), 0xBEEF,</div>
<div class="line">                                   <span class="stringliteral">&quot;Trace ShMem adj failed on EM-core: %u&quot;</span>, core);</div>
<div class="line">                m_tracebuf += g_options.tracelen * core;</div>
<div class="line">                <span class="keywordflow">if</span> (EXTRA_PRINTS)</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot;Trace buffer at %p on core %d\n&quot;</span>, m_tracebuf, core);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        mlockall(MCL_FUTURE);</div>
<div class="line">        <span class="keywordflow">if</span> (EXTRA_PRINTS)</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;core %d: %s done, shm @%p\n&quot;</span>, core, __func__, m_shm);</div>
<div class="line">}</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * Startup of the timer ring test EM application</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> test_start(<span class="keyword">const</span> appl_conf_t *appl_conf)</div>
<div class="line">{</div>
<div class="line">        em_eo_t eo;</div>
<div class="line">        <a class="code" href="../../d4/d00/structem__timer__attr__t.html">em_timer_attr_t</a> attr;</div>
<div class="line">        em_queue_t queue;</div>
<div class="line">        <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> stat;</div>
<div class="line">        app_eo_ctx_t *eo_ctx;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (appl_conf-&gt;num_procs &gt; 1) {</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;\nPROCESS MODE is not yet supported!\n&quot;</span>);</div>
<div class="line">                abort();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        fix_setup();</div>
<div class="line"> </div>
<div class="line">        eo_ctx = &amp;m_shm-&gt;eo_context;</div>
<div class="line">        memset(eo_ctx, 0, <span class="keyword">sizeof</span>(app_eo_ctx_t));</div>
<div class="line"> </div>
<div class="line">        eo = <a name="a54"></a><a class="code" href="../../d8/d5f/group__em__eo.html#ga196c7caa1177575fd424e9a0d2854da6">em_eo_create</a>(APP_EO_NAME, app_eo_start, app_eo_start_local,</div>
<div class="line">                          app_eo_stop, app_eo_stop_local, app_eo_receive,</div>
<div class="line">                          eo_ctx);</div>
<div class="line">        test_fatal_if(eo == <a name="a55"></a><a class="code" href="../../d4/d11/event__machine__types_8h.html#af28fb8daf62b942ced417e158ed7e1c7">EM_EO_UNDEF</a>, <span class="stringliteral">&quot;Failed to create EO!&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        stat = <a name="a56"></a><a class="code" href="../../db/da0/group__em__error.html#gaf7332965c5deaa69411136e8d36089c6">em_register_error_handler</a>(my_error_handler);</div>
<div class="line">        test_fatal_if(stat != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;Failed to register error handler&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* parallel high priority for timeout handling*/</span></div>
<div class="line">        queue = <a name="a57"></a><a class="code" href="../../de/d3c/group__em__queue.html#gaef257858d1fa660524f198dba20fa9eb">em_queue_create</a>(<span class="stringliteral">&quot;Tmo Q&quot;</span>,</div>
<div class="line">                                <a name="a58"></a><a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#a368b59e8c18f57c4034420e3ba44e965aa3f46c70193d0a7d9bb8fc149a3179ea">EM_QUEUE_TYPE_PARALLEL</a>,</div>
<div class="line">                                <a name="a59"></a><a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#a8171ccd1b7a0df99a6c7d0f3ec82e52fa621ca7c9a90044e11dad3060006dc450">EM_QUEUE_PRIO_HIGHEST</a>,</div>
<div class="line">                                <a name="a60"></a><a class="code" href="../../db/d6d/event__machine__hw__config_8h.html#ae56af1c575498ec19f0836ee916d0eb9">EM_QUEUE_GROUP_DEFAULT</a>, NULL);</div>
<div class="line">        stat = <a name="a61"></a><a class="code" href="../../d8/d5f/group__em__eo.html#gac9b818edd466228b6fb653bd9337da3e">em_eo_add_queue_sync</a>(eo, queue);</div>
<div class="line">        test_fatal_if(stat != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;Failed to create test queue!&quot;</span>);</div>
<div class="line">        eo_ctx-&gt;test_q = queue;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* another normal priority for heartbeat */</span></div>
<div class="line">        queue = <a class="code" href="../../de/d3c/group__em__queue.html#gaef257858d1fa660524f198dba20fa9eb">em_queue_create</a>(<span class="stringliteral">&quot;HB Q&quot;</span>,</div>
<div class="line">                                <a name="a62"></a><a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#a368b59e8c18f57c4034420e3ba44e965a43e0ef6f7a63caf0b225a52412ef3032">EM_QUEUE_TYPE_ATOMIC</a>,</div>
<div class="line">                                <a name="a63"></a><a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#a8171ccd1b7a0df99a6c7d0f3ec82e52fa2311aaab5842cd6b78e4587be0fbf0ca">EM_QUEUE_PRIO_NORMAL</a>,</div>
<div class="line">                                <a class="code" href="../../db/d6d/event__machine__hw__config_8h.html#ae56af1c575498ec19f0836ee916d0eb9">EM_QUEUE_GROUP_DEFAULT</a>, NULL);</div>
<div class="line">        stat = <a class="code" href="../../d8/d5f/group__em__eo.html#gac9b818edd466228b6fb653bd9337da3e">em_eo_add_queue_sync</a>(eo, queue);</div>
<div class="line">        test_fatal_if(stat != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;Failed to add HB queue!&quot;</span>);</div>
<div class="line">        eo_ctx-&gt;hb_q = queue;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* create HB timer */</span></div>
<div class="line">        <a name="a64"></a><a class="code" href="../../de/dc2/group__em__timer.html#gad6023dd3c79d0a45221d9245c604c2e3">em_timer_attr_init</a>(&amp;attr);</div>
<div class="line">        strncpy(attr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03fc2b0569742931ed610f0bd1af43ad">name</a>, <span class="stringliteral">&quot;HBTimer&quot;</span>, EM_TIMER_NAME_LEN);</div>
<div class="line">        m_shm-&gt;hb_tmr = <a name="a65"></a><a class="code" href="../../de/dc2/group__em__timer.html#ga56968bda0ecacf996d6ce623e3e372ab">em_timer_create</a>(&amp;attr);</div>
<div class="line">        test_fatal_if(m_shm-&gt;hb_tmr == <a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#aa373a94a9084c3bd6c5b23ac6bd6b176">EM_TIMER_UNDEF</a>,</div>
<div class="line">                      <span class="stringliteral">&quot;Failed to create HB timer!&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        trace_add(TEST_TIME_FN(), TRACE_OP_TMR_CREATE, <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>(), -1, -1, NULL, m_shm-&gt;hb_tmr);</div>
<div class="line"> </div>
<div class="line">        <a name="_a66"></a><a class="code" href="../../de/d00/structem__timer__capability__t.html">em_timer_capability_t</a> capa = { 0 };</div>
<div class="line"> </div>
<div class="line">        stat = <a name="a67"></a><a class="code" href="../../de/dc2/group__em__timer.html#ga002c51ef0da36f83ce4e28f0e486c7e6">em_timer_capability</a>(&amp;capa, g_options.clksrc);</div>
<div class="line">        test_fatal_if(stat != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;em_timer_capability returned error for clk %u\n&quot;</span>,</div>
<div class="line">                      g_options.clksrc);</div>
<div class="line">        test_fatal_if(capa.<a name="a68"></a><a class="code" href="../../de/d00/structem__timer__capability__t.html#a4dc047e6a59dd5dc6737347b1a01d270">ring</a>.<a name="a69"></a><a class="code" href="../../de/d00/structem__timer__capability__t.html#a2bb4a164cd45ac22217a7b2e961ad357">max_rings</a> == 0, <span class="stringliteral">&quot;Ring timers not supported!&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot;Timer ring capability for clksrc %d:\n&quot;</span>, g_options.clksrc);</div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot; maximum timers: %d\n&quot;</span>, capa.<a class="code" href="../../de/d00/structem__timer__capability__t.html#a4dc047e6a59dd5dc6737347b1a01d270">ring</a>.<a class="code" href="../../de/d00/structem__timer__capability__t.html#a2bb4a164cd45ac22217a7b2e961ad357">max_rings</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">double</span> hz = frac2float(capa.<a class="code" href="../../de/d00/structem__timer__capability__t.html#a4dc047e6a59dd5dc6737347b1a01d270">ring</a>.<a name="a70"></a><a class="code" href="../../de/d00/structem__timer__capability__t.html#ab4117c8de1c70887a73e0e25174bc907">min_base_hz</a>);</div>
<div class="line"> </div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot; minimum base_hz: %.3f\n&quot;</span>, hz);</div>
<div class="line">        hz = frac2float(capa.<a class="code" href="../../de/d00/structem__timer__capability__t.html#a4dc047e6a59dd5dc6737347b1a01d270">ring</a>.<a name="a71"></a><a class="code" href="../../de/d00/structem__timer__capability__t.html#a173e2e868417023dd69eba384d10bf78">max_base_hz</a>);</div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot; maximum base_hz: %.3f\n&quot;</span>, hz);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Start EO */</span></div>
<div class="line">        stat = <a name="a72"></a><a class="code" href="../../d8/d5f/group__em__eo.html#gabe4f7a789ec9523367c086793061562d">em_eo_start_sync</a>(eo, NULL, NULL);</div>
<div class="line">        test_fatal_if(stat != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;Failed to start EO!&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> test_stop(<span class="keyword">const</span> appl_conf_t *appl_conf)</div>
<div class="line">{</div>
<div class="line">        <span class="keywordflow">if</span> (appl_conf-&gt;num_procs &gt; 1) {</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;%s(): skip\n&quot;</span>, __func__);</div>
<div class="line">                <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        em_eo_t eo = <a name="a73"></a><a class="code" href="../../d8/d5f/group__em__eo.html#ga9ac21d82f671fff3e31e83410e72d406">em_eo_find</a>(APP_EO_NAME);</div>
<div class="line"> </div>
<div class="line">        test_fatal_if(eo == <a class="code" href="../../d4/d11/event__machine__types_8h.html#af28fb8daf62b942ced417e158ed7e1c7">EM_EO_UNDEF</a>, <span class="stringliteral">&quot;Could not find EO:%s&quot;</span>, APP_EO_NAME);</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> ret = <a name="a74"></a><a class="code" href="../../d8/d5f/group__em__eo.html#gadce026621953114bd26e5836d9693465">em_eo_stop_sync</a>(eo);</div>
<div class="line"> </div>
<div class="line">        test_fatal_if(ret != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;EO:%&quot;</span> <a name="a75"></a><a class="code" href="../../d4/d11/event__machine__types_8h.html#a0bf4a25d46e18ee918e684e5deb27fa4">PRI_EO</a> <span class="stringliteral">&quot; stop:%&quot;</span> PRI_STAT <span class="stringliteral">&quot;&quot;</span>, eo, ret);</div>
<div class="line"> </div>
<div class="line">        ret = <a class="code" href="../../de/dc2/group__em__timer.html#ga2bac1530b021bbbd1f0f924414c2485e">em_timer_delete</a>(m_shm-&gt;hb_tmr);</div>
<div class="line">        test_fatal_if(ret != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;Timer:%&quot;</span> <a name="a76"></a><a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#a31cd14adb32c94ed0f2e27d263ad6eb1">PRI_TMR</a> <span class="stringliteral">&quot; delete:%&quot;</span> PRI_STAT <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line">                      m_shm-&gt;hb_tmr, ret);</div>
<div class="line">        m_shm-&gt;hb_tmr = <a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#aa373a94a9084c3bd6c5b23ac6bd6b176">EM_TIMER_UNDEF</a>;</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a77"></a><a class="code" href="../../d8/d5f/group__em__eo.html#ga10cf8094caa56026eb0a402d3d22da23">em_eo_remove_queue_all_sync</a>(eo, <a name="a78"></a><a class="code" href="../../d4/d11/event__machine__types_8h.html#a419c8373b72a8c5ed1c3e3ded3e262e0">EM_TRUE</a>);</div>
<div class="line">        test_fatal_if(ret != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;EO:%&quot;</span> <a class="code" href="../../d4/d11/event__machine__types_8h.html#a0bf4a25d46e18ee918e684e5deb27fa4">PRI_EO</a> <span class="stringliteral">&quot; delete Qs:%&quot;</span> PRI_STAT <span class="stringliteral">&quot;&quot;</span>, eo, ret);</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a79"></a><a class="code" href="../../d8/d5f/group__em__eo.html#gae769b19e613b24487beb943cfb926977">em_eo_delete</a>(eo);</div>
<div class="line">        test_fatal_if(ret != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;EO:%&quot;</span> <a class="code" href="../../d4/d11/event__machine__types_8h.html#a0bf4a25d46e18ee918e684e5deb27fa4">PRI_EO</a> <span class="stringliteral">&quot; delete:%&quot;</span> PRI_STAT <span class="stringliteral">&quot;&quot;</span>, eo, ret);</div>
<div class="line"> </div>
<div class="line">        <a name="a80"></a><a class="code" href="../../db/da0/group__em__error.html#gab6b469100e5f60670a742d944a6f530b">em_unregister_error_handler</a>();</div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot;test_stopped\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> test_term(<span class="keyword">const</span> appl_conf_t *appl_conf)</div>
<div class="line">{</div>
<div class="line">        (void)appl_conf;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (m_shm != NULL) {</div>
<div class="line">                odp_shm_free(odp_shm);</div>
<div class="line">                m_shm = NULL;</div>
<div class="line">                odp_shm = ODP_SHM_INVALID;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (odp_shm_trace != ODP_SHM_INVALID) {</div>
<div class="line">                odp_shm_free(odp_shm_trace);</div>
<div class="line">                odp_shm_trace = ODP_SHM_INVALID;</div>
<div class="line">        }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> app_eo_start(<span class="keywordtype">void</span> *eo_context, em_eo_t eo, <span class="keyword">const</span> <a class="code" href="../../de/dc0/structem__eo__conf__t.html">em_eo_conf_t</a> *conf)</div>
<div class="line">{</div>
<div class="line">        app_msg_t *msg;</div>
<div class="line">        app_eo_ctx_t *eo_ctx = (app_eo_ctx_t *)eo_context;</div>
<div class="line"> </div>
<div class="line">        (void)eo;</div>
<div class="line">        (void)conf;</div>
<div class="line"> </div>
<div class="line">        odp_ticketlock_init(&amp;tracelock);</div>
<div class="line">        print_setup();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> t = 0; t &lt; g_options.num_timers; t++)</div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> to = 0; to &lt; g_options.num_tmo; to++) {</div>
<div class="line">                        eo_ctx-&gt;test_tmo[t][to] = <a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#af7917fb5bc546e1339ad6e1135fd8c6d">EM_TMO_UNDEF</a>;</div>
<div class="line">                        eo_ctx-&gt;test_ev[t][to] = <a class="code" href="../../d4/d11/event__machine__types_8h.html#a8542d9c2c9a29e35ff042b1d59cc479b">EM_EVENT_UNDEF</a>;</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* create periodic timeout for heartbeat */</span></div>
<div class="line">        eo_ctx-&gt;heartbeat_tmo = <a name="a81"></a><a class="code" href="../../de/dc2/group__em__timer.html#ga4fc3dd338b784ce9b122eeb3fbf4ea07">em_tmo_create</a>(m_shm-&gt;hb_tmr, <a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#gaade0f99e694a2f999abe467bc05fde61aac8e81389e6feaf233eff357c4ece5f0">EM_TMO_FLAG_PERIODIC</a>, eo_ctx-&gt;hb_q);</div>
<div class="line">        test_fatal_if(eo_ctx-&gt;heartbeat_tmo == <a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#af7917fb5bc546e1339ad6e1135fd8c6d">EM_TMO_UNDEF</a>,</div>
<div class="line">                      <span class="stringliteral">&quot;Can&#39;t allocate heartbeat_tmo!\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        em_event_t <span class="keyword">event</span> = <a name="a82"></a><a class="code" href="../../d5/d33/group__em__event.html#ga5f0e40f1b0b4892ee16aafe07ba4c90c">em_alloc</a>(<span class="keyword">sizeof</span>(app_msg_t), <a name="a83"></a><a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#ace0fe27049350469ff1be8188acfea89a2066feedf79f96d10ce9215fa5f37db1">EM_EVENT_TYPE_SW</a>, <a name="a84"></a><a class="code" href="../../db/d6d/event__machine__hw__config_8h.html#aaa0a290a45f4b1280f3330fadde6bfde">EM_POOL_DEFAULT</a>);</div>
<div class="line"> </div>
<div class="line">        test_fatal_if(event == <a class="code" href="../../d4/d11/event__machine__types_8h.html#a8542d9c2c9a29e35ff042b1d59cc479b">EM_EVENT_UNDEF</a>, <span class="stringliteral">&quot;Can&#39;t allocate event (%ldB)!\n&quot;</span>,</div>
<div class="line">                      <span class="keyword">sizeof</span>(app_msg_t));</div>
<div class="line"> </div>
<div class="line">        msg = <a name="a85"></a><a class="code" href="../../d5/d33/group__em__event.html#ga8f701c3a5901fc81d922b9d1d02691e3">em_event_pointer</a>(event);</div>
<div class="line">        msg-&gt;count = 0;</div>
<div class="line">        msg-&gt;type = MSGTYPE_HB;</div>
<div class="line">        msg-&gt;tmo = eo_ctx-&gt;heartbeat_tmo;</div>
<div class="line">        uint64_t hb_hz = <a class="code" href="../../de/dc2/group__em__timer.html#gae97b08e2b1468de76a7d92342a5860ed">em_timer_get_freq</a>(m_shm-&gt;hb_tmr);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (hb_hz &lt; 10)</div>
<div class="line">                APPL_ERROR(<span class="stringliteral">&quot;WARNING: HB timer hz very low!?\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="../../de/dc2/group__em__timer.html#gafe7128676f8f4ad4800fd204a34ac8d3">em_timer_tick_t</a> period = hb_hz; <span class="comment">/* 1s HB */</span></div>
<div class="line"> </div>
<div class="line">        test_fatal_if(period &lt; 1, <span class="stringliteral">&quot;HB timer resolution is too low!\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        eo_ctx-&gt;state = STATE_START;</div>
<div class="line">        eo_ctx-&gt;next_change = 2;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (g_options.profile) {</div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c = 0; c &lt; m_shm-&gt;core_count; c++)</div>
<div class="line">                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> p = 0; p &lt; NUM_PROFILES; p++)</div>
<div class="line">                                eo_ctx-&gt;cdat[c].prof[p].min = UINT64_MAX;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* start heartbeat */</span></div>
<div class="line">        <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> stat = <a name="a86"></a><a class="code" href="../../de/dc2/group__em__timer.html#ga8f1f88a05b9e366f3b31447dead90b5e">em_tmo_set_periodic</a>(eo_ctx-&gt;heartbeat_tmo, 0, period, event);</div>
<div class="line"> </div>
<div class="line">        test_fatal_if(stat != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;Can&#39;t activate heartbeat tmo!\n&quot;</span>);</div>
<div class="line">        trace_add(TEST_TIME_FN(), TRACE_OP_TMO_SET, <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>(),</div>
<div class="line">                  -1, -1, NULL, eo_ctx-&gt;heartbeat_tmo);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (EXTRA_PRINTS)</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;WARNING: extra prints enabled, expect some timing jitter\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        stat = <a name="a87"></a><a class="code" href="../../d3/db8/group__em__dispatcher.html#ga50a0ef57733fbe0bf06ccfd0e3c2a665">em_dispatch_register_enter_cb</a>(enter_cb);</div>
<div class="line">        test_fatal_if(stat != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;enter_cb() register failed!&quot;</span>);</div>
<div class="line">        stat = <a name="a88"></a><a class="code" href="../../d3/db8/group__em__dispatcher.html#ga867519ecfc13f60713d54b419cdc2f25">em_dispatch_register_exit_cb</a>(exit_cb);</div>
<div class="line">        test_fatal_if(stat != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;exit_cb() register failed!&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>;</div>
<div class="line">}</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * @private</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * EO per thread start function.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">static</span> <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> app_eo_start_local(<span class="keywordtype">void</span> *eo_context, em_eo_t eo)</div>
<div class="line">{</div>
<div class="line">        app_eo_ctx_t *<span class="keyword">const</span> eo_ctx = eo_context;</div>
<div class="line">        <span class="keywordtype">int</span> core = <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>();</div>
<div class="line"> </div>
<div class="line">        (void)eo;</div>
<div class="line">        (void)eo_ctx;</div>
<div class="line"> </div>
<div class="line">        test_fatal_if(core &gt;= MAX_CORES, <span class="stringliteral">&quot;Too many cores!&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        memset(&amp;eo_ctx-&gt;cdat[core].rnd, 0, <span class="keyword">sizeof</span>(rnd_state_t));</div>
<div class="line">        initstate_r(time(NULL), eo_ctx-&gt;cdat[core].rnd.rndstate, RND_STATE_BUF,</div>
<div class="line">                    &amp;eo_ctx-&gt;cdat[core].rnd.rdata);</div>
<div class="line">        srandom(time(NULL));</div>
<div class="line">        m_tracecount = 0;</div>
<div class="line">        trace_add(TEST_TIME_FN(), TRACE_OP_START, core, -1, -1, NULL, NULL);</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>;</div>
<div class="line">}</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * @private</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * EO stop function.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">static</span> <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> app_eo_stop(<span class="keywordtype">void</span> *eo_context, em_eo_t eo)</div>
<div class="line">{</div>
<div class="line">        app_eo_ctx_t *<span class="keyword">const</span> eo_ctx = eo_context;</div>
<div class="line">        em_event_t <span class="keyword">event</span> = <a class="code" href="../../d4/d11/event__machine__types_8h.html#a8542d9c2c9a29e35ff042b1d59cc479b">EM_EVENT_UNDEF</a>;</div>
<div class="line"> </div>
<div class="line">        (void)eo;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (EXTRA_PRINTS)</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;EO stop\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (eo_ctx-&gt;heartbeat_tmo != <a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#af7917fb5bc546e1339ad6e1135fd8c6d">EM_TMO_UNDEF</a>) {</div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="../../de/dc2/group__em__timer.html#ga66476f77546996eea9acebaa471c1b52">em_tmo_get_state</a>(eo_ctx-&gt;heartbeat_tmo) == <a class="code" href="../../de/dc2/group__em__timer.html#gga3857ab06946e6b4047352d5d84ffff4daa54abf62265d1c2beaeeadb6a1ee240f">EM_TMO_STATE_ACTIVE</a>)</div>
<div class="line">                        <a class="code" href="../../de/dc2/group__em__timer.html#ga786f0cc89e9bdfda1c1274165600f0ef">em_tmo_cancel</a>(eo_ctx-&gt;heartbeat_tmo, &amp;event);</div>
<div class="line"> </div>
<div class="line">                <a class="code" href="../../de/dc2/group__em__timer.html#ga67d2db5f72ccdd285649ce05b0a22a92">em_tmo_delete</a>(eo_ctx-&gt;heartbeat_tmo);</div>
<div class="line">                eo_ctx-&gt;heartbeat_tmo = <a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#af7917fb5bc546e1339ad6e1135fd8c6d">EM_TMO_UNDEF</a>;</div>
<div class="line">                <span class="keywordflow">if</span> (event != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a8542d9c2c9a29e35ff042b1d59cc479b">EM_EVENT_UNDEF</a>)</div>
<div class="line">                        <a class="code" href="../../d5/d33/group__em__event.html#gad4f97ba217518d967f8078c56023c4d4">em_free</a>(event);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        delete_test_timer(eo_context);</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> ret = <a name="a89"></a><a class="code" href="../../d3/db8/group__em__dispatcher.html#gaaa150b80e664ea595e0e0820c8c80860">em_dispatch_unregister_enter_cb</a>(enter_cb);</div>
<div class="line"> </div>
<div class="line">        test_fatal_if(ret != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;enter_cb() unregister:%&quot;</span> PRI_STAT, ret);</div>
<div class="line">        ret = <a name="a90"></a><a class="code" href="../../d3/db8/group__em__dispatcher.html#ga4196836cb6f8fa4ad23be15c8951e89d">em_dispatch_unregister_exit_cb</a>(exit_cb);</div>
<div class="line">        test_fatal_if(ret != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>, <span class="stringliteral">&quot;exit_cb() unregister:%&quot;</span> PRI_STAT, ret);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (EXTRA_PRINTS)</div>
<div class="line">                APPL_PRINT(<span class="stringliteral">&quot;EO stop done\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> app_eo_stop_local(<span class="keywordtype">void</span> *eo_context, em_eo_t eo)</div>
<div class="line">{</div>
<div class="line">        (void)eo;</div>
<div class="line"> </div>
<div class="line">        trace_add(TEST_TIME_FN(), TRACE_OP_END, <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>(), -1, -1, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* dump trace */</span></div>
<div class="line">        <span class="keywordflow">if</span> (g_options.tracelen) {</div>
<div class="line">                odp_ticketlock_lock(&amp;tracelock); <span class="comment">/* serialize printing */</span></div>
<div class="line">                dump_trace(eo_context);</div>
<div class="line">                odp_ticketlock_unlock(&amp;tracelock);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* EO receive function */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> app_eo_receive(<span class="keywordtype">void</span> *eo_context, em_event_t event,</div>
<div class="line">                           <a class="code" href="../../d4/d11/event__machine__types_8h.html#a49fd700da185b0f64834bf967479a992">em_event_type_t</a> type, em_queue_t queue,</div>
<div class="line">                           <span class="keywordtype">void</span> *q_context)</div>
<div class="line">{</div>
<div class="line">        uint64_t now = TEST_TIME_FN();</div>
<div class="line">        app_eo_ctx_t *<span class="keyword">const</span> eo_ctx = eo_context;</div>
<div class="line">        <span class="keywordtype">bool</span> reuse = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">        (void)q_context;</div>
<div class="line">        (void)queue;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* heartbeat */</span></div>
<div class="line">        <span class="keywordflow">if</span> (type == <a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#ace0fe27049350469ff1be8188acfea89a2066feedf79f96d10ce9215fa5f37db1">EM_EVENT_TYPE_SW</a>) {</div>
<div class="line">                app_msg_t *msgin = (app_msg_t *)<a class="code" href="../../d5/d33/group__em__event.html#ga8f701c3a5901fc81d922b9d1d02691e3">em_event_pointer</a>(event);</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">switch</span> (msgin-&gt;type) {</div>
<div class="line">                <span class="keywordflow">case</span> MSGTYPE_HB: <span class="comment">/* uses atomic queue */</span></div>
<div class="line">                        reuse = handle_heartbeat(eo_ctx, event, msgin, now);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">default</span>:</div>
<div class="line">                        test_error(<a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#ac341b7db29d8127e864a45c9bd2a4aa3">EM_ERROR_SET_FATAL</a>(0xDEAD), 0xBEEF, <span class="stringliteral">&quot;Invalid msg received!\n&quot;</span>);</div>
<div class="line">                }</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a name="a91"></a><a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#ace0fe27049350469ff1be8188acfea89a8756e1784050a4a95172f610636d3ad3">EM_EVENT_TYPE_TIMER_IND</a>) { <span class="comment">/* test timeout */</span></div>
<div class="line">                reuse = handle_tmo(eo_ctx, event, now); <span class="comment">/* uses parallel queue */</span></div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">                test_error(<a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#ac341b7db29d8127e864a45c9bd2a4aa3">EM_ERROR_SET_FATAL</a>(0xDEAD), 0xBEEF, <span class="stringliteral">&quot;Invalid event type %u!\n&quot;</span>, type);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!reuse) {</div>
<div class="line">                <span class="keywordflow">if</span> (type == <a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#ace0fe27049350469ff1be8188acfea89a8756e1784050a4a95172f610636d3ad3">EM_EVENT_TYPE_TIMER_IND</a>) { <span class="comment">/* extra trace */</span></div>
<div class="line">                        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tmri, tmoi;</div>
<div class="line"> </div>
<div class="line">                        ptr2tmo(<a class="code" href="../../de/dc2/group__em__timer.html#gaf80b501272a9a7d416cf7e2018703973">em_tmo_get_userptr</a>(event, NULL), &amp;tmri, &amp;tmoi);</div>
<div class="line">                        trace_add(TEST_TIME_FN(), TRACE_OP_TMO_EV_FREE, <a class="code" href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a>(),</div>
<div class="line">                                  tmri, tmoi, eo_ctx-&gt;test_tmo[tmri][tmoi], event);</div>
<div class="line">                        eo_ctx-&gt;test_ev[tmri][tmoi] = <a class="code" href="../../d4/d11/event__machine__types_8h.html#a8542d9c2c9a29e35ff042b1d59cc479b">EM_EVENT_UNDEF</a>;</div>
<div class="line">                }</div>
<div class="line">                <a class="code" href="../../d5/d33/group__em__event.html#gad4f97ba217518d967f8078c56023c4d4">em_free</a>(event);</div>
<div class="line">        }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">        <span class="comment">/* pick app-specific arguments after &#39;--&#39; */</span></div>
<div class="line">        <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">        APPL_PRINT(<span class="stringliteral">&quot;EM periodic ring timer test %s\n\n&quot;</span>, VERSION);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (i = 1; i &lt; argc; i++) {</div>
<div class="line">                <span class="keywordflow">if</span> (!strcmp(argv[i], <span class="stringliteral">&quot;--&quot;</span>))</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (i &lt; argc) {</div>
<div class="line">                <span class="keywordflow">if</span> (!parse_my_args(i, argc, argv)) {</div>
<div class="line">                        APPL_PRINT(<span class="stringliteral">&quot;Invalid application arguments\n&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">return</span> 1;</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> cm_setup(argc, argv);</div>
<div class="line">}</div>
<div class="ttc" id="aevent__machine_8h_html"><div class="ttname"><a href="../../d7/d5e/event__machine_8h.html">event_machine.h</a></div></div>
<div class="ttc" id="aevent__machine__hw__config_8h_html_aaa0a290a45f4b1280f3330fadde6bfde"><div class="ttname"><a href="../../db/d6d/event__machine__hw__config_8h.html#aaa0a290a45f4b1280f3330fadde6bfde">EM_POOL_DEFAULT</a></div><div class="ttdeci">#define EM_POOL_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6d/event__machine__hw__config_8h_source.html#l00191">event_machine_hw_config.h:191</a></div></div>
<div class="ttc" id="aevent__machine__hw__config_8h_html_ae56af1c575498ec19f0836ee916d0eb9"><div class="ttname"><a href="../../db/d6d/event__machine__hw__config_8h.html#ae56af1c575498ec19f0836ee916d0eb9">EM_QUEUE_GROUP_DEFAULT</a></div><div class="ttdeci">#define EM_QUEUE_GROUP_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6d/event__machine__hw__config_8h_source.html#l00147">event_machine_hw_config.h:147</a></div></div>
<div class="ttc" id="aevent__machine__hw__types_8h_html_a368b59e8c18f57c4034420e3ba44e965a43e0ef6f7a63caf0b225a52412ef3032"><div class="ttname"><a href="../../d0/d07/event__machine__hw__types_8h.html#a368b59e8c18f57c4034420e3ba44e965a43e0ef6f7a63caf0b225a52412ef3032">EM_QUEUE_TYPE_ATOMIC</a></div><div class="ttdeci">@ EM_QUEUE_TYPE_ATOMIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d07/event__machine__hw__types_8h_source.html#l00112">event_machine_hw_types.h:112</a></div></div>
<div class="ttc" id="aevent__machine__hw__types_8h_html_a368b59e8c18f57c4034420e3ba44e965aa3f46c70193d0a7d9bb8fc149a3179ea"><div class="ttname"><a href="../../d0/d07/event__machine__hw__types_8h.html#a368b59e8c18f57c4034420e3ba44e965aa3f46c70193d0a7d9bb8fc149a3179ea">EM_QUEUE_TYPE_PARALLEL</a></div><div class="ttdeci">@ EM_QUEUE_TYPE_PARALLEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d07/event__machine__hw__types_8h_source.html#l00117">event_machine_hw_types.h:117</a></div></div>
<div class="ttc" id="aevent__machine__hw__types_8h_html_a740919266fbb41b8a8127a9ef215eea0a5e2e63f7ddf4a916caa09f43a07d9fb3"><div class="ttname"><a href="../../d0/d07/event__machine__hw__types_8h.html#a740919266fbb41b8a8127a9ef215eea0a5e2e63f7ddf4a916caa09f43a07d9fb3">EM_ERR_CANCELED</a></div><div class="ttdeci">@ EM_ERR_CANCELED</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d07/event__machine__hw__types_8h_source.html#l00309">event_machine_hw_types.h:309</a></div></div>
<div class="ttc" id="aevent__machine__hw__types_8h_html_a740919266fbb41b8a8127a9ef215eea0aba0bc2e7908d78aff4eea67ec219b091"><div class="ttname"><a href="../../d0/d07/event__machine__hw__types_8h.html#a740919266fbb41b8a8127a9ef215eea0aba0bc2e7908d78aff4eea67ec219b091">EM_ERR_NOT_SUPPORTED</a></div><div class="ttdeci">@ EM_ERR_NOT_SUPPORTED</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d07/event__machine__hw__types_8h_source.html#l00284">event_machine_hw_types.h:284</a></div></div>
<div class="ttc" id="aevent__machine__hw__types_8h_html_a740919266fbb41b8a8127a9ef215eea0ae173e1529a1b79dedd05c6eb5d15e24c"><div class="ttname"><a href="../../d0/d07/event__machine__hw__types_8h.html#a740919266fbb41b8a8127a9ef215eea0ae173e1529a1b79dedd05c6eb5d15e24c">EM_ERR_TOONEAR</a></div><div class="ttdeci">@ EM_ERR_TOONEAR</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d07/event__machine__hw__types_8h_source.html#l00305">event_machine_hw_types.h:305</a></div></div>
<div class="ttc" id="aevent__machine__hw__types_8h_html_a8171ccd1b7a0df99a6c7d0f3ec82e52fa2311aaab5842cd6b78e4587be0fbf0ca"><div class="ttname"><a href="../../d0/d07/event__machine__hw__types_8h.html#a8171ccd1b7a0df99a6c7d0f3ec82e52fa2311aaab5842cd6b78e4587be0fbf0ca">EM_QUEUE_PRIO_NORMAL</a></div><div class="ttdeci">@ EM_QUEUE_PRIO_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d07/event__machine__hw__types_8h_source.html#l00153">event_machine_hw_types.h:153</a></div></div>
<div class="ttc" id="aevent__machine__hw__types_8h_html_a8171ccd1b7a0df99a6c7d0f3ec82e52fa621ca7c9a90044e11dad3060006dc450"><div class="ttname"><a href="../../d0/d07/event__machine__hw__types_8h.html#a8171ccd1b7a0df99a6c7d0f3ec82e52fa621ca7c9a90044e11dad3060006dc450">EM_QUEUE_PRIO_HIGHEST</a></div><div class="ttdeci">@ EM_QUEUE_PRIO_HIGHEST</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d07/event__machine__hw__types_8h_source.html#l00156">event_machine_hw_types.h:155</a></div></div>
<div class="ttc" id="aevent__machine__hw__types_8h_html_ac341b7db29d8127e864a45c9bd2a4aa3"><div class="ttname"><a href="../../d0/d07/event__machine__hw__types_8h.html#ac341b7db29d8127e864a45c9bd2a4aa3">EM_ERROR_SET_FATAL</a></div><div class="ttdeci">#define EM_ERROR_SET_FATAL(error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d07/event__machine__hw__types_8h_source.html#l00428">event_machine_hw_types.h:428</a></div></div>
<div class="ttc" id="aevent__machine__hw__types_8h_html_ace0fe27049350469ff1be8188acfea89a2066feedf79f96d10ce9215fa5f37db1"><div class="ttname"><a href="../../d0/d07/event__machine__hw__types_8h.html#ace0fe27049350469ff1be8188acfea89a2066feedf79f96d10ce9215fa5f37db1">EM_EVENT_TYPE_SW</a></div><div class="ttdeci">@ EM_EVENT_TYPE_SW</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d07/event__machine__hw__types_8h_source.html#l00072">event_machine_hw_types.h:72</a></div></div>
<div class="ttc" id="aevent__machine__hw__types_8h_html_ace0fe27049350469ff1be8188acfea89a8756e1784050a4a95172f610636d3ad3"><div class="ttname"><a href="../../d0/d07/event__machine__hw__types_8h.html#ace0fe27049350469ff1be8188acfea89a8756e1784050a4a95172f610636d3ad3">EM_EVENT_TYPE_TIMER_IND</a></div><div class="ttdeci">@ EM_EVENT_TYPE_TIMER_IND</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d07/event__machine__hw__types_8h_source.html#l00092">event_machine_hw_types.h:91</a></div></div>
<div class="ttc" id="aevent__machine__odp__ext_8h_html"><div class="ttname"><a href="../../d5/dbf/event__machine__odp__ext_8h.html">event_machine_odp_ext.h</a></div></div>
<div class="ttc" id="aevent__machine__timer__hw__specific_8h_html_a31cd14adb32c94ed0f2e27d263ad6eb1"><div class="ttname"><a href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#a31cd14adb32c94ed0f2e27d263ad6eb1">PRI_TMR</a></div><div class="ttdeci">#define PRI_TMR</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1f/event__machine__timer__hw__specific_8h_source.html#l00049">event_machine_timer_hw_specific.h:49</a></div></div>
<div class="ttc" id="aevent__machine__timer__hw__specific_8h_html_aa373a94a9084c3bd6c5b23ac6bd6b176"><div class="ttname"><a href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#aa373a94a9084c3bd6c5b23ac6bd6b176">EM_TIMER_UNDEF</a></div><div class="ttdeci">#define EM_TIMER_UNDEF</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1f/event__machine__timer__hw__specific_8h_source.html#l00120">event_machine_timer_hw_specific.h:120</a></div></div>
<div class="ttc" id="aevent__machine__timer__hw__specific_8h_html_af7917fb5bc546e1339ad6e1135fd8c6d"><div class="ttname"><a href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#af7917fb5bc546e1339ad6e1135fd8c6d">EM_TMO_UNDEF</a></div><div class="ttdeci">#define EM_TMO_UNDEF</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1f/event__machine__timer__hw__specific_8h_source.html#l00125">event_machine_timer_hw_specific.h:125</a></div></div>
<div class="ttc" id="aevent__machine__timer__hw__specific_8h_html_ga860d15ba27f7a6270e4914f6590999a9a11317615592fd9f54dcb7f33d9d788fd"><div class="ttname"><a href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#ga860d15ba27f7a6270e4914f6590999a9a11317615592fd9f54dcb7f33d9d788fd">EM_TIMER_FLAG_RING</a></div><div class="ttdeci">@ EM_TIMER_FLAG_RING</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1f/event__machine__timer__hw__specific_8h_source.html#l00064">event_machine_timer_hw_specific.h:63</a></div></div>
<div class="ttc" id="aevent__machine__timer__hw__specific_8h_html_gaade0f99e694a2f999abe467bc05fde61aac8e81389e6feaf233eff357c4ece5f0"><div class="ttname"><a href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#gaade0f99e694a2f999abe467bc05fde61aac8e81389e6feaf233eff357c4ece5f0">EM_TMO_FLAG_PERIODIC</a></div><div class="ttdeci">@ EM_TMO_FLAG_PERIODIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1f/event__machine__timer__hw__specific_8h_source.html#l00082">event_machine_timer_hw_specific.h:82</a></div></div>
<div class="ttc" id="aevent__machine__types_8h_html_a03546e6a7e93665c52d479831e0a6dca"><div class="ttname"><a href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a></div><div class="ttdeci">#define EM_OK</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d11/event__machine__types_8h_source.html#l00329">event_machine_types.h:329</a></div></div>
<div class="ttc" id="aevent__machine__types_8h_html_a0bf4a25d46e18ee918e684e5deb27fa4"><div class="ttname"><a href="../../d4/d11/event__machine__types_8h.html#a0bf4a25d46e18ee918e684e5deb27fa4">PRI_EO</a></div><div class="ttdeci">#define PRI_EO</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d11/event__machine__types_8h_source.html#l00097">event_machine_types.h:97</a></div></div>
<div class="ttc" id="aevent__machine__types_8h_html_a0c0a929399ae33b615f8ca8018d2a69d"><div class="ttname"><a href="../../d4/d11/event__machine__types_8h.html#a0c0a929399ae33b615f8ca8018d2a69d">em_escope_t</a></div><div class="ttdeci">uint32_t em_escope_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d11/event__machine__types_8h_source.html#l00348">event_machine_types.h:348</a></div></div>
<div class="ttc" id="aevent__machine__types_8h_html_a419c8373b72a8c5ed1c3e3ded3e262e0"><div class="ttname"><a href="../../d4/d11/event__machine__types_8h.html#a419c8373b72a8c5ed1c3e3ded3e262e0">EM_TRUE</a></div><div class="ttdeci">#define EM_TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d11/event__machine__types_8h_source.html#l00053">event_machine_types.h:53</a></div></div>
<div class="ttc" id="aevent__machine__types_8h_html_a49fd700da185b0f64834bf967479a992"><div class="ttname"><a href="../../d4/d11/event__machine__types_8h.html#a49fd700da185b0f64834bf967479a992">em_event_type_t</a></div><div class="ttdeci">uint32_t em_event_type_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d11/event__machine__types_8h_source.html#l00085">event_machine_types.h:85</a></div></div>
<div class="ttc" id="aevent__machine__types_8h_html_a8542d9c2c9a29e35ff042b1d59cc479b"><div class="ttname"><a href="../../d4/d11/event__machine__types_8h.html#a8542d9c2c9a29e35ff042b1d59cc479b">EM_EVENT_UNDEF</a></div><div class="ttdeci">#define EM_EVENT_UNDEF</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d11/event__machine__types_8h_source.html#l00062">event_machine_types.h:62</a></div></div>
<div class="ttc" id="aevent__machine__types_8h_html_adddd88868f7aa0d32b3e40245eb4ef8f"><div class="ttname"><a href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a></div><div class="ttdeci">uint32_t em_status_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d11/event__machine__types_8h_source.html#l00321">event_machine_types.h:321</a></div></div>
<div class="ttc" id="aevent__machine__types_8h_html_af28fb8daf62b942ced417e158ed7e1c7"><div class="ttname"><a href="../../d4/d11/event__machine__types_8h.html#af28fb8daf62b942ced417e158ed7e1c7">EM_EO_UNDEF</a></div><div class="ttdeci">#define EM_EO_UNDEF</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d11/event__machine__types_8h_source.html#l00095">event_machine_types.h:95</a></div></div>
<div class="ttc" id="agroup__em__core_html_ga13d21af31382ec2c3d45010645707e9c"><div class="ttname"><a href="../../d5/d69/group__em__core.html#ga13d21af31382ec2c3d45010645707e9c">em_core_id</a></div><div class="ttdeci">int em_core_id(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df9/event__machine__core_8c_source.html#l00034">event_machine_core.c:34</a></div></div>
<div class="ttc" id="agroup__em__dispatcher_html_ga4196836cb6f8fa4ad23be15c8951e89d"><div class="ttname"><a href="../../d3/db8/group__em__dispatcher.html#ga4196836cb6f8fa4ad23be15c8951e89d">em_dispatch_unregister_exit_cb</a></div><div class="ttdeci">em_status_t em_dispatch_unregister_exit_cb(em_dispatch_exit_func_t func)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0d/event__machine__dispatcher_8c_source.html#l00330">event_machine_dispatcher.c:330</a></div></div>
<div class="ttc" id="agroup__em__dispatcher_html_ga50a0ef57733fbe0bf06ccfd0e3c2a665"><div class="ttname"><a href="../../d3/db8/group__em__dispatcher.html#ga50a0ef57733fbe0bf06ccfd0e3c2a665">em_dispatch_register_enter_cb</a></div><div class="ttdeci">em_status_t em_dispatch_register_enter_cb(em_dispatch_enter_func_t func)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0d/event__machine__dispatcher_8c_source.html#l00274">event_machine_dispatcher.c:274</a></div></div>
<div class="ttc" id="agroup__em__dispatcher_html_ga867519ecfc13f60713d54b419cdc2f25"><div class="ttname"><a href="../../d3/db8/group__em__dispatcher.html#ga867519ecfc13f60713d54b419cdc2f25">em_dispatch_register_exit_cb</a></div><div class="ttdeci">em_status_t em_dispatch_register_exit_cb(em_dispatch_exit_func_t func)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0d/event__machine__dispatcher_8c_source.html#l00312">event_machine_dispatcher.c:312</a></div></div>
<div class="ttc" id="agroup__em__dispatcher_html_gaaa150b80e664ea595e0e0820c8c80860"><div class="ttname"><a href="../../d3/db8/group__em__dispatcher.html#gaaa150b80e664ea595e0e0820c8c80860">em_dispatch_unregister_enter_cb</a></div><div class="ttdeci">em_status_t em_dispatch_unregister_enter_cb(em_dispatch_enter_func_t func)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0d/event__machine__dispatcher_8c_source.html#l00293">event_machine_dispatcher.c:293</a></div></div>
<div class="ttc" id="agroup__em__eo_html_ga10cf8094caa56026eb0a402d3d22da23"><div class="ttname"><a href="../../d8/d5f/group__em__eo.html#ga10cf8094caa56026eb0a402d3d22da23">em_eo_remove_queue_all_sync</a></div><div class="ttdeci">em_status_t em_eo_remove_queue_all_sync(em_eo_t eo, int delete_queues)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd3/event__machine__eo_8c_source.html#l00517">event_machine_eo.c:517</a></div></div>
<div class="ttc" id="agroup__em__eo_html_ga1262b0eefaf7840f9c2b44b7fe3ff93e"><div class="ttname"><a href="../../d8/d5f/group__em__eo.html#ga1262b0eefaf7840f9c2b44b7fe3ff93e">em_eo_get_context</a></div><div class="ttdeci">void * em_eo_get_context(em_eo_t eo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd3/event__machine__eo_8c_source.html#l01002">event_machine_eo.c:1002</a></div></div>
<div class="ttc" id="agroup__em__eo_html_ga196c7caa1177575fd424e9a0d2854da6"><div class="ttname"><a href="../../d8/d5f/group__em__eo.html#ga196c7caa1177575fd424e9a0d2854da6">em_eo_create</a></div><div class="ttdeci">em_eo_t em_eo_create(const char *name, em_start_func_t start, em_start_local_func_t local_start, em_stop_func_t stop, em_stop_local_func_t local_stop, em_receive_func_t receive, const void *eo_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd3/event__machine__eo_8c_source.html#l00040">event_machine_eo.c:40</a></div></div>
<div class="ttc" id="agroup__em__eo_html_ga9ac21d82f671fff3e31e83410e72d406"><div class="ttname"><a href="../../d8/d5f/group__em__eo.html#ga9ac21d82f671fff3e31e83410e72d406">em_eo_find</a></div><div class="ttdeci">em_eo_t em_eo_find(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd3/event__machine__eo_8c_source.html#l00265">event_machine_eo.c:265</a></div></div>
<div class="ttc" id="agroup__em__eo_html_gabe4f7a789ec9523367c086793061562d"><div class="ttname"><a href="../../d8/d5f/group__em__eo.html#gabe4f7a789ec9523367c086793061562d">em_eo_start_sync</a></div><div class="ttdeci">em_status_t em_eo_start_sync(em_eo_t eo, em_status_t *result, const em_eo_conf_t *conf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd3/event__machine__eo_8c_source.html#l00725">event_machine_eo.c:725</a></div></div>
<div class="ttc" id="agroup__em__eo_html_gac9b818edd466228b6fb653bd9337da3e"><div class="ttname"><a href="../../d8/d5f/group__em__eo.html#gac9b818edd466228b6fb653bd9337da3e">em_eo_add_queue_sync</a></div><div class="ttdeci">em_status_t em_eo_add_queue_sync(em_eo_t eo, em_queue_t queue)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd3/event__machine__eo_8c_source.html#l00344">event_machine_eo.c:344</a></div></div>
<div class="ttc" id="agroup__em__eo_html_gadce026621953114bd26e5836d9693465"><div class="ttname"><a href="../../d8/d5f/group__em__eo.html#gadce026621953114bd26e5836d9693465">em_eo_stop_sync</a></div><div class="ttdeci">em_status_t em_eo_stop_sync(em_eo_t eo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd3/event__machine__eo_8c_source.html#l00897">event_machine_eo.c:897</a></div></div>
<div class="ttc" id="agroup__em__eo_html_gae769b19e613b24487beb943cfb926977"><div class="ttname"><a href="../../d8/d5f/group__em__eo.html#gae769b19e613b24487beb943cfb926977">em_eo_delete</a></div><div class="ttdeci">em_status_t em_eo_delete(em_eo_t eo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd3/event__machine__eo_8c_source.html#l00205">event_machine_eo.c:205</a></div></div>
<div class="ttc" id="agroup__em__error_html_gab6b469100e5f60670a742d944a6f530b"><div class="ttname"><a href="../../db/da0/group__em__error.html#gab6b469100e5f60670a742d944a6f530b">em_unregister_error_handler</a></div><div class="ttdeci">em_status_t em_unregister_error_handler(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/de9/event__machine__error_8c_source.html#l00050">event_machine_error.c:50</a></div></div>
<div class="ttc" id="agroup__em__error_html_gaf7332965c5deaa69411136e8d36089c6"><div class="ttname"><a href="../../db/da0/group__em__error.html#gaf7332965c5deaa69411136e8d36089c6">em_register_error_handler</a></div><div class="ttdeci">em_status_t em_register_error_handler(em_error_handler_t handler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/de9/event__machine__error_8c_source.html#l00034">event_machine_error.c:34</a></div></div>
<div class="ttc" id="agroup__em__event_html_ga5f0e40f1b0b4892ee16aafe07ba4c90c"><div class="ttname"><a href="../../d5/d33/group__em__event.html#ga5f0e40f1b0b4892ee16aafe07ba4c90c">em_alloc</a></div><div class="ttdeci">em_event_t em_alloc(uint32_t size, em_event_type_t type, em_pool_t pool)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d32/event__machine__event_8c_source.html#l00033">event_machine_event.c:33</a></div></div>
<div class="ttc" id="agroup__em__event_html_ga8f701c3a5901fc81d922b9d1d02691e3"><div class="ttname"><a href="../../d5/d33/group__em__event.html#ga8f701c3a5901fc81d922b9d1d02691e3">em_event_pointer</a></div><div class="ttdeci">void * em_event_pointer(em_event_t event)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d32/event__machine__event_8c_source.html#l00750">event_machine_event.c:750</a></div></div>
<div class="ttc" id="agroup__em__event_html_gad4f97ba217518d967f8078c56023c4d4"><div class="ttname"><a href="../../d5/d33/group__em__event.html#gad4f97ba217518d967f8078c56023c4d4">em_free</a></div><div class="ttdeci">void em_free(em_event_t event)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d32/event__machine__event_8c_source.html#l00261">event_machine_event.c:261</a></div></div>
<div class="ttc" id="agroup__em__queue_html_gaef257858d1fa660524f198dba20fa9eb"><div class="ttname"><a href="../../de/d3c/group__em__queue.html#gaef257858d1fa660524f198dba20fa9eb">em_queue_create</a></div><div class="ttdeci">em_queue_t em_queue_create(const char *name, em_queue_type_t type, em_queue_prio_t prio, em_queue_group_t group, const em_queue_conf_t *conf)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dba/event__machine__queue_8c_source.html#l00041">event_machine_queue.c:41</a></div></div>
<div class="ttc" id="agroup__em__timer_html_ga002c51ef0da36f83ce4e28f0e486c7e6"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#ga002c51ef0da36f83ce4e28f0e486c7e6">em_timer_capability</a></div><div class="ttdeci">em_status_t em_timer_capability(em_timer_capability_t *capa, em_timer_clksrc_t clk_src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l00502">event_machine_timer.c:502</a></div></div>
<div class="ttc" id="agroup__em__timer_html_ga01e680281f0ae40bce6c6786fc0bcdc3"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#ga01e680281f0ae40bce6c6786fc0bcdc3">em_timer_get_attr</a></div><div class="ttdeci">em_status_t em_timer_get_attr(em_timer_t tmr, em_timer_attr_t *tmr_attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l01752">event_machine_timer.c:1752</a></div></div>
<div class="ttc" id="agroup__em__timer_html_ga20a84e2f8b65dbaf916ec45a1ade1ee3"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#ga20a84e2f8b65dbaf916ec45a1ade1ee3">em_tmo_get_type</a></div><div class="ttdeci">em_tmo_type_t em_tmo_get_type(em_event_t event, em_tmo_t *tmo, bool reset)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l01874">event_machine_timer.c:1874</a></div></div>
<div class="ttc" id="agroup__em__timer_html_ga25b88dbbb772090d6caa5622c7017889"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#ga25b88dbbb772090d6caa5622c7017889">em_timer_get_all</a></div><div class="ttdeci">int em_timer_get_all(em_timer_t *tmr_list, int max)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l01728">event_machine_timer.c:1728</a></div></div>
<div class="ttc" id="agroup__em__timer_html_ga2bac1530b021bbbd1f0f924414c2485e"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#ga2bac1530b021bbbd1f0f924414c2485e">em_timer_delete</a></div><div class="ttdeci">em_status_t em_timer_delete(em_timer_t tmr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l00980">event_machine_timer.c:980</a></div></div>
<div class="ttc" id="agroup__em__timer_html_ga3857ab06946e6b4047352d5d84ffff4d"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#ga3857ab06946e6b4047352d5d84ffff4d">em_tmo_state_t</a></div><div class="ttdeci">em_tmo_state_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00234">api/event_machine_timer.h:234</a></div></div>
<div class="ttc" id="agroup__em__timer_html_ga3c82d75381d0cd0d5ff81f9180d92699"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#ga3c82d75381d0cd0d5ff81f9180d92699">em_timer_ring_attr_init</a></div><div class="ttdeci">em_status_t em_timer_ring_attr_init(em_timer_attr_t *ring_attr, em_timer_clksrc_t clk_src, uint64_t base_hz, uint64_t max_mul, uint64_t res_ns)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l00444">event_machine_timer.c:444</a></div></div>
<div class="ttc" id="agroup__em__timer_html_ga4225ba6bde991c6419461075d031c3dc"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#ga4225ba6bde991c6419461075d031c3dc">em_tmo_set_periodic_ring</a></div><div class="ttdeci">em_status_t em_tmo_set_periodic_ring(em_tmo_t tmo, em_timer_tick_t start_abs, uint64_t multiplier, em_event_t tmo_ev)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l01457">event_machine_timer.c:1457</a></div></div>
<div class="ttc" id="agroup__em__timer_html_ga4fc3dd338b784ce9b122eeb3fbf4ea07"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#ga4fc3dd338b784ce9b122eeb3fbf4ea07">em_tmo_create</a></div><div class="ttdeci">em_tmo_t em_tmo_create(em_timer_t tmr, em_tmo_flag_t flags, em_queue_t queue)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l01056">event_machine_timer.c:1056</a></div></div>
<div class="ttc" id="agroup__em__timer_html_ga56968bda0ecacf996d6ce623e3e372ab"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#ga56968bda0ecacf996d6ce623e3e372ab">em_timer_create</a></div><div class="ttdeci">em_timer_t em_timer_create(const em_timer_attr_t *tmr_attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l00616">event_machine_timer.c:616</a></div></div>
<div class="ttc" id="agroup__em__timer_html_ga66476f77546996eea9acebaa471c1b52"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#ga66476f77546996eea9acebaa471c1b52">em_tmo_get_state</a></div><div class="ttdeci">em_tmo_state_t em_tmo_get_state(em_tmo_t tmo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l01837">event_machine_timer.c:1837</a></div></div>
<div class="ttc" id="agroup__em__timer_html_ga67d2db5f72ccdd285649ce05b0a22a92"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#ga67d2db5f72ccdd285649ce05b0a22a92">em_tmo_delete</a></div><div class="ttdeci">em_status_t em_tmo_delete(em_tmo_t tmo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l01161">event_machine_timer.c:1161</a></div></div>
<div class="ttc" id="agroup__em__timer_html_ga6c3e2d62c82f0a1b165171f8fff1ef81"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#ga6c3e2d62c82f0a1b165171f8fff1ef81">em_timer_clksrc_t</a></div><div class="ttdeci">em_timer_clksrc_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1f/event__machine__timer__hw__specific_8h_source.html#l00095">event_machine_timer_hw_specific.h:95</a></div></div>
<div class="ttc" id="agroup__em__timer_html_ga786f0cc89e9bdfda1c1274165600f0ef"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#ga786f0cc89e9bdfda1c1274165600f0ef">em_tmo_cancel</a></div><div class="ttdeci">em_status_t em_tmo_cancel(em_tmo_t tmo, em_event_t *cur_event)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l01533">event_machine_timer.c:1533</a></div></div>
<div class="ttc" id="agroup__em__timer_html_ga85e56489032dd3cf237c28e18b663189"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#ga85e56489032dd3cf237c28e18b663189">em_timer_ring_create</a></div><div class="ttdeci">em_timer_t em_timer_ring_create(const em_timer_attr_t *ring_attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l00770">event_machine_timer.c:770</a></div></div>
<div class="ttc" id="agroup__em__timer_html_ga8f1f88a05b9e366f3b31447dead90b5e"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#ga8f1f88a05b9e366f3b31447dead90b5e">em_tmo_set_periodic</a></div><div class="ttdeci">em_status_t em_tmo_set_periodic(em_tmo_t tmo, em_timer_tick_t start_abs, em_timer_tick_t period, em_event_t tmo_ev)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l01372">event_machine_timer.c:1372</a></div></div>
<div class="ttc" id="agroup__em__timer_html_gaabb77ed31727a32d041f9d308a0a3886"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#gaabb77ed31727a32d041f9d308a0a3886">em_timer_current_tick</a></div><div class="ttdeci">em_timer_tick_t em_timer_current_tick(em_timer_t tmr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l01045">event_machine_timer.c:1045</a></div></div>
<div class="ttc" id="agroup__em__timer_html_gacc26f0fd2b18a7400ce4a23a4f6247b2"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#gacc26f0fd2b18a7400ce4a23a4f6247b2">em_tmo_create_arg</a></div><div class="ttdeci">em_tmo_t em_tmo_create_arg(em_timer_t tmr, em_tmo_flag_t flags, em_queue_t queue, em_tmo_args_t *args)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l01061">event_machine_timer.c:1061</a></div></div>
<div class="ttc" id="agroup__em__timer_html_gad6023dd3c79d0a45221d9245c604c2e3"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#gad6023dd3c79d0a45221d9245c604c2e3">em_timer_attr_init</a></div><div class="ttdeci">void em_timer_attr_init(em_timer_attr_t *tmr_attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l00378">event_machine_timer.c:378</a></div></div>
<div class="ttc" id="agroup__em__timer_html_gae97b08e2b1468de76a7d92342a5860ed"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#gae97b08e2b1468de76a7d92342a5860ed">em_timer_get_freq</a></div><div class="ttdeci">uint64_t em_timer_get_freq(em_timer_t tmr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l01797">event_machine_timer.c:1797</a></div></div>
<div class="ttc" id="agroup__em__timer_html_gaeae3893806e054292ba834cd1b556abc"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#gaeae3893806e054292ba834cd1b556abc">em_timer_ring_capability</a></div><div class="ttdeci">em_status_t em_timer_ring_capability(em_timer_ring_param_t *ring)</div><div class="ttdoc">Check periodic ring timer capability.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l00577">event_machine_timer.c:577</a></div></div>
<div class="ttc" id="agroup__em__timer_html_gaf65f50c383b579720a31154b04ea610e"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#gaf65f50c383b579720a31154b04ea610e">em_tmo_ack</a></div><div class="ttdeci">em_status_t em_tmo_ack(em_tmo_t tmo, em_event_t next_tmo_ev)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l01612">event_machine_timer.c:1612</a></div></div>
<div class="ttc" id="agroup__em__timer_html_gaf80b501272a9a7d416cf7e2018703973"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#gaf80b501272a9a7d416cf7e2018703973">em_tmo_get_userptr</a></div><div class="ttdeci">void * em_tmo_get_userptr(em_event_t event, em_tmo_t *tmo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/event__machine__timer_8c_source.html#l01907">event_machine_timer.c:1907</a></div></div>
<div class="ttc" id="agroup__em__timer_html_gafe7128676f8f4ad4800fd204a34ac8d3"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#gafe7128676f8f4ad4800fd204a34ac8d3">em_timer_tick_t</a></div><div class="ttdeci">uint64_t em_timer_tick_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00255">api/event_machine_timer.h:255</a></div></div>
<div class="ttc" id="agroup__em__timer_html_gga3857ab06946e6b4047352d5d84ffff4daa54abf62265d1c2beaeeadb6a1ee240f"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#gga3857ab06946e6b4047352d5d84ffff4daa54abf62265d1c2beaeeadb6a1ee240f">EM_TMO_STATE_ACTIVE</a></div><div class="ttdeci">@ EM_TMO_STATE_ACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00237">api/event_machine_timer.h:237</a></div></div>
<div class="ttc" id="agroup__em__timer_html_ggafc12eb3000ea78f2493b1e36b832f63badea7e33cc1c34e598f387f0909ca471c"><div class="ttname"><a href="../../de/dc2/group__em__timer.html#ggafc12eb3000ea78f2493b1e36b832f63badea7e33cc1c34e598f387f0909ca471c">EM_TMO_TYPE_PERIODIC</a></div><div class="ttdeci">@ EM_TMO_TYPE_PERIODIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00247">api/event_machine_timer.h:247</a></div></div>
<div class="ttc" id="astructem__eo__conf__t_html"><div class="ttname"><a href="../../de/dc0/structem__eo__conf__t.html">em_eo_conf_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d11/event__machine__types_8h_source.html#l00242">event_machine_types.h:242</a></div></div>
<div class="ttc" id="astructem__fract__u64__t_html"><div class="ttname"><a href="../../d6/dfc/structem__fract__u64__t.html">em_fract_u64_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00260">api/event_machine_timer.h:260</a></div></div>
<div class="ttc" id="astructem__fract__u64__t_html_a21e4d0cb4da3eb9e657ab465c60234a5"><div class="ttname"><a href="../../d6/dfc/structem__fract__u64__t.html#a21e4d0cb4da3eb9e657ab465c60234a5">em_fract_u64_t::numer</a></div><div class="ttdeci">uint64_t numer</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00265">api/event_machine_timer.h:265</a></div></div>
<div class="ttc" id="astructem__fract__u64__t_html_a9bd28db0ac7019c39300aa558b57557a"><div class="ttname"><a href="../../d6/dfc/structem__fract__u64__t.html#a9bd28db0ac7019c39300aa558b57557a">em_fract_u64_t::integer</a></div><div class="ttdeci">uint64_t integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00262">api/event_machine_timer.h:262</a></div></div>
<div class="ttc" id="astructem__fract__u64__t_html_aca80adb3c999a862938a314d089f2c8e"><div class="ttname"><a href="../../d6/dfc/structem__fract__u64__t.html#aca80adb3c999a862938a314d089f2c8e">em_fract_u64_t::denom</a></div><div class="ttdeci">uint64_t denom</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00268">api/event_machine_timer.h:268</a></div></div>
<div class="ttc" id="astructem__timer__attr__t_html"><div class="ttname"><a href="../../d4/d00/structem__timer__attr__t.html">em_timer_attr_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00332">api/event_machine_timer.h:332</a></div></div>
<div class="ttc" id="astructem__timer__attr__t_html_a03dfacf21843c3693271d22a8ae51b45"><div class="ttname"><a href="../../d4/d00/structem__timer__attr__t.html#a03dfacf21843c3693271d22a8ae51b45">em_timer_attr_t::ringparam</a></div><div class="ttdeci">em_timer_ring_param_t ringparam</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00353">api/event_machine_timer.h:353</a></div></div>
<div class="ttc" id="astructem__timer__attr__t_html_a03fc2b0569742931ed610f0bd1af43ad"><div class="ttname"><a href="../../d4/d00/structem__timer__attr__t.html#a03fc2b0569742931ed610f0bd1af43ad">em_timer_attr_t::name</a></div><div class="ttdeci">char name[EM_TIMER_NAME_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00346">api/event_machine_timer.h:346</a></div></div>
<div class="ttc" id="astructem__timer__attr__t_html_a4fadbebcdbff4fcf420987ee4eb2aad0"><div class="ttname"><a href="../../d4/d00/structem__timer__attr__t.html#a4fadbebcdbff4fcf420987ee4eb2aad0">em_timer_attr_t::flags</a></div><div class="ttdeci">em_timer_flag_t flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00344">api/event_machine_timer.h:344</a></div></div>
<div class="ttc" id="astructem__timer__attr__t_html_adf7a24e643b381f39fec354caf5a4bc0"><div class="ttname"><a href="../../d4/d00/structem__timer__attr__t.html#adf7a24e643b381f39fec354caf5a4bc0">em_timer_attr_t::resparam</a></div><div class="ttdeci">em_timer_res_param_t resparam</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00339">api/event_machine_timer.h:339</a></div></div>
<div class="ttc" id="astructem__timer__attr__t_html_ae6afcdeed8fe620636b1f0391f908afc"><div class="ttname"><a href="../../d4/d00/structem__timer__attr__t.html#ae6afcdeed8fe620636b1f0391f908afc">em_timer_attr_t::num_tmo</a></div><div class="ttdeci">uint32_t num_tmo</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00342">api/event_machine_timer.h:342</a></div></div>
<div class="ttc" id="astructem__timer__capability__t_html"><div class="ttname"><a href="../../de/d00/structem__timer__capability__t.html">em_timer_capability_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00382">api/event_machine_timer.h:382</a></div></div>
<div class="ttc" id="astructem__timer__capability__t_html_a173e2e868417023dd69eba384d10bf78"><div class="ttname"><a href="../../de/d00/structem__timer__capability__t.html#a173e2e868417023dd69eba384d10bf78">em_timer_capability_t::max_base_hz</a></div><div class="ttdeci">em_fract_u64_t max_base_hz</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00401">api/event_machine_timer.h:401</a></div></div>
<div class="ttc" id="astructem__timer__capability__t_html_a2bb4a164cd45ac22217a7b2e961ad357"><div class="ttname"><a href="../../de/d00/structem__timer__capability__t.html#a2bb4a164cd45ac22217a7b2e961ad357">em_timer_capability_t::max_rings</a></div><div class="ttdeci">uint32_t max_rings</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00395">api/event_machine_timer.h:395</a></div></div>
<div class="ttc" id="astructem__timer__capability__t_html_a4dc047e6a59dd5dc6737347b1a01d270"><div class="ttname"><a href="../../de/d00/structem__timer__capability__t.html#a4dc047e6a59dd5dc6737347b1a01d270">em_timer_capability_t::ring</a></div><div class="ttdeci">struct em_timer_capability_t::@2 ring</div></div>
<div class="ttc" id="astructem__timer__capability__t_html_ab4117c8de1c70887a73e0e25174bc907"><div class="ttname"><a href="../../de/d00/structem__timer__capability__t.html#ab4117c8de1c70887a73e0e25174bc907">em_timer_capability_t::min_base_hz</a></div><div class="ttdeci">em_fract_u64_t min_base_hz</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00399">api/event_machine_timer.h:399</a></div></div>
<div class="ttc" id="astructem__timer__res__param__t_html_a07ed3b3b2e89e83ca36fb2efbc731c45"><div class="ttname"><a href="../../d8/d93/structem__timer__res__param__t.html#a07ed3b3b2e89e83ca36fb2efbc731c45">em_timer_res_param_t::clk_src</a></div><div class="ttdeci">em_timer_clksrc_t clk_src</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00283">api/event_machine_timer.h:283</a></div></div>
<div class="ttc" id="astructem__timer__res__param__t_html_a6a48acfe30394982686a96f1f402ac0c"><div class="ttname"><a href="../../d8/d93/structem__timer__res__param__t.html#a6a48acfe30394982686a96f1f402ac0c">em_timer_res_param_t::res_ns</a></div><div class="ttdeci">uint64_t res_ns</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00285">api/event_machine_timer.h:285</a></div></div>
<div class="ttc" id="astructem__timer__res__param__t_html_abb8211175d76213b77c952c1608fbded"><div class="ttname"><a href="../../d8/d93/structem__timer__res__param__t.html#abb8211175d76213b77c952c1608fbded">em_timer_res_param_t::max_tmo</a></div><div class="ttdeci">uint64_t max_tmo</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00291">api/event_machine_timer.h:291</a></div></div>
<div class="ttc" id="astructem__timer__ring__param__t_html"><div class="ttname"><a href="../../de/dcc/structem__timer__ring__param__t.html">em_timer_ring_param_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00297">api/event_machine_timer.h:297</a></div></div>
<div class="ttc" id="astructem__timer__ring__param__t_html_a513c9c3bc23ed596c9fbf4986b7ac129"><div class="ttname"><a href="../../de/dcc/structem__timer__ring__param__t.html#a513c9c3bc23ed596c9fbf4986b7ac129">em_timer_ring_param_t::base_hz</a></div><div class="ttdeci">em_fract_u64_t base_hz</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00301">api/event_machine_timer.h:301</a></div></div>
<div class="ttc" id="astructem__timer__ring__param__t_html_a896d2f2d25982ddcb5b8231416a03cf2"><div class="ttname"><a href="../../de/dcc/structem__timer__ring__param__t.html#a896d2f2d25982ddcb5b8231416a03cf2">em_timer_ring_param_t::res_ns</a></div><div class="ttdeci">uint64_t res_ns</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00305">api/event_machine_timer.h:305</a></div></div>
<div class="ttc" id="astructem__timer__ring__param__t_html_acf1a65875710715895ad21d37a70a154"><div class="ttname"><a href="../../de/dcc/structem__timer__ring__param__t.html#acf1a65875710715895ad21d37a70a154">em_timer_ring_param_t::max_mul</a></div><div class="ttdeci">uint64_t max_mul</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00303">api/event_machine_timer.h:303</a></div></div>
<div class="ttc" id="astructem__timer__ring__param__t_html_af782096bfbf9916456befcf4f6006e5d"><div class="ttname"><a href="../../de/dcc/structem__timer__ring__param__t.html#af782096bfbf9916456befcf4f6006e5d">em_timer_ring_param_t::clk_src</a></div><div class="ttdeci">em_timer_clksrc_t clk_src</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00299">api/event_machine_timer.h:299</a></div></div>
<div class="ttc" id="astructem__timer__timeout__t_html"><div class="ttname"><a href="../../dd/d32/structem__timer__timeout__t.html">em_timer_timeout_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d2f/em__timer__types_8h_source.html#l00076">em_timer_types.h:76</a></div></div>
<div class="ttc" id="astructem__tmo__args__t_html"><div class="ttname"><a href="../../dc/dfd/structem__tmo__args__t.html">em_tmo_args_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00410">api/event_machine_timer.h:410</a></div></div>
<div class="ttc" id="astructem__tmo__args__t_html_ab87d50f6c09b3cbbf78b2915370d0055"><div class="ttname"><a href="../../dc/dfd/structem__tmo__args__t.html#ab87d50f6c09b3cbbf78b2915370d0055">em_tmo_args_t::userptr</a></div><div class="ttdeci">void * userptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df3/api_2event__machine__timer_8h_source.html#l00412">api/event_machine_timer.h:412</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
  <div id="footer" class="tabs">
   <div class="headertitle"> 
     &copy; 2017 Nokia Networks
   </div>
  </div>
 </body>
</html>
